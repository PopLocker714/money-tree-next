(()=>{var e={};e.id=375,e.ids=[375],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},93977:e=>{"use strict";e.exports=require("node:fs/promises")},49411:e=>{"use strict";e.exports=require("node:path")},17638:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var s=r(49442),o=r(10042),a=r(48190),n=r.n(a),i=r(63289),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["(cms)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,28059)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,17004)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},f=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/(cms)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},53666:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"004ba786a57e0d7a81d69cfed44b0f540be569869a":()=>s.Z});var s=r(91754)},98928:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"6000a8d67eb22d90587212521099c39a129734caa5":()=>m,"600e4c0d28148dcb04f28391bd02a4b55fde7ce914":()=>c,"606343b8b93fd172dccf9d2e5e99522097130b5de6":()=>i,"60aff37a695455f1b46f0627b6163831eeb87446ab":()=>f});var s=r(63722);r(20453);var o=r(32169),a=r(95553),n=r(46309);async function i(e,t){let r=a.insertCategorySchema.safeParse({name:t.get("name"),parentId:Number(t.get("parentId"))||void 0});if(!r.success)return{error:r.error.flatten().fieldErrors};try{let e=await o.Z.insert(a.$Categories).values({name:r.data.name,parentId:r.data.parentId});return{error:null,data:e}}catch(e){return console.log(e),{error:"Something went wrong"}}}(0,n.h)([i]),(0,s.j)(i,"606343b8b93fd172dccf9d2e5e99522097130b5de6",null);var l=r(20754);async function c(e,t){let r=Number(t.get("id"))||void 0;if(!r)return{error:"Something went wrong"};try{let e=await o.Z.delete(a.$Categories).where((0,l.eq)(a.$Categories.id,r));return{error:null,data:e}}catch(e){return console.log(e),{error:"Something went wrong"}}}(0,n.h)([c]),(0,s.j)(c,"600e4c0d28148dcb04f28391bd02a4b55fde7ce914",null);var d=r(30879);let u=d.z.object({id:d.z.number(),name:d.z.string().optional(),parentId:d.z.number().optional()});async function f(e,t){let r=u.safeParse({id:Number(t.get("id")),name:t.get("name"),parentId:Number(t.get("parentId"))||void 0});if(!r.success)return{error:r.error.flatten().fieldErrors};try{let e=await o.Z.update(a.$Categories).set(r.data).where((0,l.eq)(a.$Categories.id,r.data.id));return{error:null,data:e}}catch(e){return console.log(e),{error:"Something went wrong"}}}(0,n.h)([f]),(0,s.j)(f,"60aff37a695455f1b46f0627b6163831eeb87446ab",null);var p=r(28893);async function m(e,t){let r=a.insertProductSchema.safeParse({title:t.get("title"),description:t.get("description"),sku:t.get("sku"),price:Number(t.get("price"))||void 0,discount:Number(t.get("discount"))||void 0,stock:Number(t.get("stock"))||void 0,categoryId:Number(t.get("categoryId"))||void 0,keywordsSearch:t.get("keywordsSearch"),isFeatured:"on"===t.get("isFeatured"),isActive:"on"===t.get("isActive")});if(!r.success)return{error:r.error.flatten().fieldErrors,ok:!1,data:{}};let s=t.get("preview"),n=[t.get("image1"),t.get("image2"),t.get("image3"),t.get("image4"),t.get("image5")],i=[];try{i=n.map(async(e,t)=>{if(!e||!(e instanceof Blob))throw Error("Файл не найден или неправильный формат");if(0===e.size)return null;let r=await (0,p.Z)(e,`${t}`);if(!r.ok)throw Error(r.error||"Не удалось сохранить изображение");return"string"==typeof r.data?r.data:null})}catch(e){if(e instanceof Error)return{ok:!1,error:e.message,data:{}}}console.log("promise images",await Promise.all(i));let l=await Promise.all(i).then(e=>JSON.stringify(e)).catch(e=>(console.error(e),"[]")),c=null;if(!s||!(s instanceof Blob))return{error:"Файл не найден или неправильный формат",ok:!1,data:{}};if(s&&s.size>0){let e=await (0,p.Z)(s,"preview");if(e.error)return{error:e.error,ok:!1,data:{}};"string"==typeof e.data&&(c=e.data)}try{return await o.Z.insert(a.$Products).values({...r.data,previewImage:c,images:l}),{ok:!0,error:null,data:{}}}catch(e){if(e instanceof Error)return{ok:!1,data:{},error:e.message};return{error:"Something went wrong",ok:!1,data:{}}}}(0,n.h)([m]),(0,s.j)(m,"6000a8d67eb22d90587212521099c39a129734caa5",null)},56994:()=>{},13184:()=>{},12975:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,46472,23)),Promise.resolve().then(r.t.bind(r,42461,23)),Promise.resolve().then(r.t.bind(r,48190,23)),Promise.resolve().then(r.t.bind(r,15282,23)),Promise.resolve().then(r.t.bind(r,56613,23)),Promise.resolve().then(r.t.bind(r,5486,23)),Promise.resolve().then(r.t.bind(r,58825,23))},750:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52144,23)),Promise.resolve().then(r.t.bind(r,62302,23)),Promise.resolve().then(r.t.bind(r,63582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,65329,23)),Promise.resolve().then(r.t.bind(r,50599,23)),Promise.resolve().then(r.t.bind(r,62118,23))},66329:(e,t,r)=>{Promise.resolve().then(r.bind(r,48590)),Promise.resolve().then(r.bind(r,37159)),Promise.resolve().then(r.bind(r,29950)),Promise.resolve().then(r.bind(r,17083)),Promise.resolve().then(r.bind(r,66091)),Promise.resolve().then(r.bind(r,54619)),Promise.resolve().then(r.bind(r,69740))},99432:(e,t,r)=>{Promise.resolve().then(r.bind(r,52317)),Promise.resolve().then(r.bind(r,88243)),Promise.resolve().then(r.bind(r,89847)),Promise.resolve().then(r.bind(r,72526)),Promise.resolve().then(r.bind(r,8916)),Promise.resolve().then(r.bind(r,99461)),Promise.resolve().then(r.bind(r,53251))},42347:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(20149),o=r(14971),a=r(63606);function n({initialValue:e=null,keyName:t,label:r}){let[n,i]=(0,a.useState)(e);return(0,s.jsxs)("div",{className:"flex flex-col",children:[r&&(0,s.jsx)("label",{htmlFor:t,children:r}),(0,s.jsx)("input",{onChange:e=>{let t=e.target.files?.[0];t&&i(URL.createObjectURL(t))},type:"file",name:t,id:t,accept:"image/*"}),n&&(0,s.jsx)(o.default,{src:n,alt:t,width:200,height:200,className:"w-[200px] h-[200px] object-cover"})]})}},61307:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(20149);function o({showRequired:e=!0,label:t,hidden:r,...o}){let a="checkbox"===o.type,n=t&&t.length>0;return a?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{...o}),(0,s.jsx)("label",{htmlFor:o.id,className:"ml-2 text-sm",children:t})]}):(0,s.jsx)("div",{className:"flex flex-col"+(r?" hidden":""),children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{htmlFor:o.id,className:"ml-2 mb-3",children:t}),(0,s.jsxs)("div",{className:"relative flex max-w-[400px]",children:[(0,s.jsx)("input",{...o,className:"bg-white-100 flex-1 rounded-2xl py-4 px-6 text-base border-none mb-3 "+o.className}),o.required&&e&&(0,s.jsx)("span",{className:"text-red-500 absolute right-4 top-[calc(50%-16px)]",children:"*"})]})]}):(0,s.jsxs)("div",{className:"relative flex max-w-[400px]",children:[(0,s.jsx)("input",{...o,className:"bg-white-100 flex-1 rounded-2xl py-4 px-6 text-base border-none mb-3 "+o.className}),o.required&&e&&(0,s.jsx)("span",{className:"text-red-500 absolute right-4 "+(n?"top-[calc(50%+2px)]":"top-[calc(50%-16px)]"),children:"*"})]})})}},81775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(20149);function o({label:e,...t}){return e&&e.length>0?(0,s.jsxs)("div",{className:"flex flex-col relative",children:[(0,s.jsx)("label",{htmlFor:t.id,className:"ml-2 mb-3",children:e}),(0,s.jsx)("textarea",{id:t.id,className:"bg-white-100 rounded-2xl py-4 px-6 text-base border-none mb-3 resize-y",...t})]}):(0,s.jsx)("textarea",{className:"bg-white-100 flex w-full max-w-[400px] rounded-2xl py-4 px-6 text-base border-none mb-3 resize-y",...t})}r(63606)},52317:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var s=r(20149),o=r(63606);function a({tabs:e}){let[t,r]=(0,o.useState)(0);return(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,s.jsx)("div",{className:"flex border-b border-gray-300",children:e.map(e=>(0,s.jsx)("button",{onClick:()=>r(+e.id),className:`flex-1 py-2 text-center font-medium ${t===+e.id?"text-blue-500 border-b-2 border-blue-500":"text-gray-500"}`,children:e.label},e.id))}),(0,s.jsx)("div",{className:"p-4 bg-white border border-gray-300 rounded-b-lg shadow-sm",children:e[t]?.content})]})}},88243:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),o=r(63606),a=r(61307),n=r(8412);let i=(0,n.createServerReference)("606343b8b93fd172dccf9d2e5e99522097130b5de6",n.callServer,void 0,n.findSourceMapURL,"default");function l(){let[e,t,r]=(0,o.useActionState)(i,{error:null,data:{}});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:"flex flex-col max-w-[400px] flex-1",action:t,children:[(0,s.jsx)(a.Z,{type:"text",name:"name",id:"name",placeholder:"Name",required:!0}),(0,s.jsx)(a.Z,{type:"number",name:"parentId",id:"parentId",placeholder:"Parent [id]"}),e.error&&(0,s.jsx)("pre",{children:JSON.stringify(e)}),(0,s.jsx)("button",{disabled:r,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Добавить"})]})})}},89847:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),o=r(63606),a=r(61307),n=r(8412);let i=(0,n.createServerReference)("600e4c0d28148dcb04f28391bd02a4b55fde7ce914",n.callServer,void 0,n.findSourceMapURL,"default");function l(){let[e,t,r]=(0,o.useActionState)(i,{error:null,data:{}});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:"flex flex-col max-w-[400px] flex-1",action:t,children:[(0,s.jsx)(a.Z,{type:"number",name:"id",id:"parentId",placeholder:"Category [id]"}),e.error&&(0,s.jsx)("pre",{children:JSON.stringify(e)}),(0,s.jsx)("button",{disabled:r,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Удалить"})]})})}},72526:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),o=r(63606),a=r(61307),n=r(8412);let i=(0,n.createServerReference)("60aff37a695455f1b46f0627b6163831eeb87446ab",n.callServer,void 0,n.findSourceMapURL,"updateCategory");function l(){let[e,t,r]=(0,o.useActionState)(i,{error:null,data:{}});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:"flex flex-col max-w-[400px] flex-1",action:t,children:[(0,s.jsx)(a.Z,{type:"number",name:"id",id:"id",placeholder:"Category [id]",required:!0}),(0,s.jsx)(a.Z,{type:"text",name:"name",id:"name",placeholder:"Name",required:!0}),(0,s.jsx)(a.Z,{type:"number",name:"parentId",id:"parentId",placeholder:"Parent [id]"}),e.error&&(0,s.jsx)("pre",{children:JSON.stringify(e)}),(0,s.jsx)("button",{disabled:r,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Изменить"})]})})}},99461:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>o});var s=r(20149);let o=[{accessorKey:"title",header:"Название"},{accessorKey:"sku",header:"Артикул"},{accessorKey:"price",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Цена"}),cell:({row:e})=>{let t=parseFloat(e.getValue("price")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}},{accessorKey:"discount",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Скидка"}),cell:({row:e})=>{let t=parseFloat(e.getValue("discount")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}}]},53251:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),o=r(27552),a=r(69485),n=r(95860),i=r(9877);function l({columns:e,data:t}){let r=(0,o.b7)({data:t,columns:e,getCoreRowModel:(0,a.sC)(),getPaginationRowModel:(0,a.G_)()}),l=(0,i.useRouter)();return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(n.iA,{children:[(0,s.jsx)(n.xD,{children:r.getHeaderGroups().map(e=>(0,s.jsx)(n.SC,{children:e.headers.map(e=>(0,s.jsx)(n.ss,{children:e.isPlaceholder?null:(0,o.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(n.RM,{children:r.getRowModel().rows?.length?r.getRowModel().rows.map(e=>(0,s.jsx)(n.SC,{onClick:()=>l.push(`/dashboard/products/${e.original.id}`),"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(n.pj,{children:(0,o.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(n.SC,{children:(0,s.jsx)(n.pj,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsx)("button",{onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),children:"Previous"}),(0,s.jsx)("button",{onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),children:"Next"})]})]})}},8916:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(20149),o=r(63606),a=r(61307),n=r(81775),i=r(42347),l=r(8412);let c=(0,l.createServerReference)("6000a8d67eb22d90587212521099c39a129734caa5",l.callServer,void 0,l.findSourceMapURL,"default");function d(){let[e,t,r]=(0,o.useActionState)(c,{error:null,ok:!1,data:{}});return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("form",{className:"flex flex-col mb-4",action:t,children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"flex-1 mr-4",children:[(0,s.jsx)(a.Z,{type:"text",name:"title",id:"title",placeholder:"Название",required:!0}),(0,s.jsx)(n.Z,{name:"description",id:"description",placeholder:"Описание"}),(0,s.jsx)(a.Z,{type:"text",name:"sku",id:"sku",placeholder:"Артикул",required:!0}),(0,s.jsx)(a.Z,{type:"number",name:"price",id:"price",placeholder:"Цена",required:!0})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(a.Z,{type:"number",name:"discount",id:"discount",placeholder:"Скидка"}),(0,s.jsx)(a.Z,{type:"number",name:"stock",id:"stock",placeholder:"Наличие",required:!0}),(0,s.jsx)(a.Z,{type:"text",name:"categoryId",id:"categoryId",placeholder:"Категория [id]"}),(0,s.jsx)(a.Z,{type:"text",name:"keywordSearch",id:"keywordSearch",placeholder:"Ключевые слова"})]})]}),(0,s.jsx)(a.Z,{label:"Добавить на главный экран",type:"checkbox",name:"isFeatured",id:"isFeatured"}),(0,s.jsx)(a.Z,{label:"Активировать",type:"checkbox",name:"isActive",id:"isActive"}),(0,s.jsx)(i.Z,{label:"Превью",keyName:"preview"}),(0,s.jsx)("h2",{className:"text-2xl mb-1",children:"Галерея"}),(0,s.jsxs)("div",{className:"flex flex-wrap",children:[(0,s.jsx)(i.Z,{label:"Изображение 1",keyName:"image1"}),(0,s.jsx)(i.Z,{label:"Изображение 2",keyName:"image2"}),(0,s.jsx)(i.Z,{label:"Изображение 3",keyName:"image3"}),(0,s.jsx)(i.Z,{label:"Изображение 4",keyName:"image4"}),(0,s.jsx)(i.Z,{label:"Изображение 5",keyName:"image5"})]}),e.error&&(0,s.jsx)("pre",{children:JSON.stringify(e)}),(0,s.jsx)("button",{disabled:r,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Создать"})]})})}},95860:(e,t,r)=>{"use strict";r.d(t,{iA:()=>l,RM:()=>d,pj:()=>p,ss:()=>f,xD:()=>c,SC:()=>u});var s=r(20149),o=r(63606),a=r(50836),n=r(88132);function i(...e){return(0,n.m6)((0,a.W)(e))}let l=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:i("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let c=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:i("[&_tr]:border-b",e),...t}));c.displayName="TableHeader";let d=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:i("[&_tr:last-child]:border-0",e),...t}));d.displayName="TableBody",o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:i("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let u=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:i("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));u.displayName="TableRow";let f=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:i("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));f.displayName="TableHead";let p=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:i("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));p.displayName="TableCell",o.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:i("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},12482:(e,t,r)=>{"use strict";Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return u}});let s=r(38438),o=r(13830),a=r(79348),n=r(30412),i=r(94375),l=r(93122),c=r(62010),d=r(49625);function u(){let e="cookies",t=a.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();if(t){if(t.forceStatic)return p(s.RequestCookiesAdapter.seal(new o.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if("after"===r.phase)throw Error(`Route ${t.route} used "cookies" inside "unstable_after(...)". This is not supported. If you need this data inside an "unstable_after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/unstable_after`)}if(t.dynamicShouldError)throw new l.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type)return function(e,t){let r=f.get(t);if(r)return r;let s=(0,c.makeHangingPromise)(t.renderSignal,"`cookies()`");return f.set(t,s),Object.defineProperties(s,{[Symbol.iterator]:{value:function(){let r="`cookies()[Symbol.iterator]()`",s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},size:{get(){let r="`cookies().size`",s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},get:{value:function(){let r;r=0==arguments.length?"`cookies().get()`":`\`cookies().get(${m(arguments[0])})\``;let s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},getAll:{value:function(){let r;r=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${m(arguments[0])})\``;let s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},has:{value:function(){let r;r=0==arguments.length?"`cookies().has()`":`\`cookies().has(${m(arguments[0])})\``;let s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},set:{value:function(){let r;if(0==arguments.length)r="`cookies().set()`";else{let e=arguments[0];r=e?`\`cookies().set(${m(e)}, ...)\``:"`cookies().set(...)`"}let s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},delete:{value:function(){let r;r=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${m(arguments[0])})\``:`\`cookies().delete(${m(arguments[0])}, ...)\``;let s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},clear:{value:function(){let r="`cookies().clear()`",s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}},toString:{value:function(){let r="`cookies().toString()`",s=h(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,s,t)}}}),s}(t.route,r);"prerender-ppr"===r.type?(0,i.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,i.throwToInterruptStaticGeneration)(e,t,r)}(0,i.trackDynamicDataInDynamicRender)(t,r)}let d=(0,n.getExpectedRequestStore)(e);return p((0,s.areCookiesMutableInCurrentPhase)(d)?d.userspaceMutableCookies:d.cookies)}r(22551);let f=new WeakMap;function p(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):b.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):g.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function m(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}function h(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)}function b(){return this.getAll().map(e=>[e.name,e]).values()}function g(e){for(let e of this.getAll())this.delete(e.name);return e}(0,d.createDedupedByCallsiteServerErrorLoggerDev)(h)},27873:(e,t,r)=>{"use strict";let s=r(30412),o=r(79348),a=r(94375),n=r(49625),i=r(93122),l=r(3105);new WeakMap;class c{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){d("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){d("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}function d(e){let t=o.workAsyncStorage.getStore(),r=s.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}if(t.dynamicShouldError)throw new i.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type){let s=Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`);(0,a.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,s,r)}else if("prerender-ppr"===r.type)(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let s=new l.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw t.dynamicUsageDescription=e,t.dynamicUsageStack=s.stack,s}}}}(0,n.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)})},61770:(e,t,r)=>{"use strict";r(76558),r(79348),r(30412),r(94375),r(93122),r(62010);let s=r(49625);r(22551);let o=new WeakMap;(0,s.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)})},76558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return a},ReadonlyHeadersError:function(){return o}});let s=r(74437);class o extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new o}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,o){if("symbol"==typeof r)return s.ReflectAdapter.get(t,r,o);let a=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==n)return s.ReflectAdapter.get(t,n,o)},set(t,r,o,a){if("symbol"==typeof r)return s.ReflectAdapter.set(t,r,o,a);let n=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===n);return s.ReflectAdapter.set(t,i??r,o,a)},has(t,r){if("symbol"==typeof r)return s.ReflectAdapter.has(t,r);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0!==a&&s.ReflectAdapter.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return s.ReflectAdapter.deleteProperty(t,r);let o=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===o);return void 0===a||s.ReflectAdapter.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return o.callable;default:return s.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,s]of this.entries())e.call(t,s,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},38438:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return f},ReadonlyRequestCookiesError:function(){return i},RequestCookiesAdapter:function(){return l},appendMutableCookies:function(){return u},areCookiesMutableInCurrentPhase:function(){return m},getModifiedCookieValues:function(){return d},responseCookiesToRequestCookies:function(){return b},wrapWithMutableAccessCheck:function(){return p}});let s=r(13830),o=r(74437),a=r(79348),n=r(30412);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new i}}class l{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return i.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}}let c=Symbol.for("next.mutated.cookies");function d(e){let t=e[c];return t&&Array.isArray(t)&&0!==t.length?t:[]}function u(e,t){let r=d(t);if(0===r.length)return!1;let o=new s.ResponseCookies(e),a=o.getAll();for(let e of r)o.set(e);for(let e of a)o.set(e);return!0}class f{static wrap(e,t){let r=new s.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let n=[],i=new Set,l=()=>{let e=a.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),n=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of n){let r=new s.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},d=new Proxy(r,{get(e,t,r){switch(t){case c:return n;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),d}finally{l()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),d}finally{l()}};default:return o.ReflectAdapter.get(e,t,r)}}});return d}}function p(e){let t=new Proxy(e,{get(e,r,s){switch(r){case"delete":return function(...r){return h("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return h("cookies().set"),e.set(...r),t};default:return o.ReflectAdapter.get(e,r,s)}}});return t}function m(e){return"action"===e.phase}function h(e){if(!m((0,n.getExpectedRequestStore)(e)))throw new i}function b(e){let t=new s.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},91754:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(64443);r(98356);var o=r(12482);r(61770),r(27873);var a=r(71623);async function n(){(await (0,o.Q)()).set("session","",{expires:new Date(0)}),(0,a.redirect)("/login")}(0,r(35413).h)([n]),(0,s.j)(n,"004ba786a57e0d7a81d69cfed44b0f540be569869a",null)},28059:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j,metadata:()=>v});var s=r(47705),o=r(59540),a=r(91754);function n({category:e}){return(0,s.jsxs)("div",{className:"pl-4 border-l border-gray-300",children:[(0,s.jsx)("div",{className:"py-2 flex items-center",children:(0,s.jsxs)("span",{className:"font-semibold text-gray-700",children:[e.name," [",e.id,"]"]})}),e.children&&e.children.length>0&&(0,s.jsx)("div",{className:"ml-4",children:e.children.map(e=>(0,s.jsx)(n,{category:e},e.id))})]})}let i=function({categories:e}){return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Категории"}),(0,s.jsx)("div",{children:e.map(e=>(0,s.jsx)(n,{category:e},e.id))})]})};var l=r(48590),c=r(29950),d=r(37159),u=r(17083),f=r(12154);async function p(){let e=await (0,f.q)(),t=[{id:"0",label:"Добавить",content:(0,s.jsx)(d.default,{})},{id:"1",label:"Удалить",content:(0,s.jsx)(c.default,{})},{id:"2",label:"Изменить",content:(0,s.jsx)(u.default,{})}];return(0,s.jsx)("section",{className:"container py-6",children:(0,s.jsxs)("div",{className:"flex justify-between ",children:[(0,s.jsx)(i,{categories:e}),(0,s.jsx)(l.default,{tabs:t})]})})}var m=r(93726);async function h(){try{return await m.Z.query.$Products.findMany()}catch(e){return console.log(e),[]}}var b=r(66091),g=r(54619),x=r(69740);async function y(){let e=(await h()).map(e=>({id:e.id,title:e.title,sku:e.sku,price:e.price,discount:e.discount||0}));return(0,s.jsxs)("section",{className:"container py-6",children:[(0,s.jsx)("h2",{className:"text-3xl mb-7",children:"Товары"}),(0,s.jsx)(b.default,{}),(0,s.jsx)(x.default,{columns:g.ProductColumn,data:e})]})}let v={title:"Dashboard",description:""};async function j(){return await (0,o.connection)(),(0,s.jsxs)("main",{children:[(0,s.jsx)("section",{className:"container",children:(0,s.jsx)("form",{action:a.Z,children:(0,s.jsx)("button",{type:"submit",children:"Logout"})})}),(0,s.jsx)(p,{}),(0,s.jsx)(y,{})]})}},17004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o,viewport:()=>a});var s=r(47705);r(47453),r(32528);let o={title:"dashboard",description:""},a={width:"device-width",initialScale:1};function n({children:e}){return(0,s.jsx)("html",{lang:"ru",children:(0,s.jsx)("body",{children:e})})}},12154:(e,t,r)=>{"use strict";r.d(t,{q:()=>o});var s=r(93726);let o=async()=>(function(e){let t={};e.forEach(e=>{t[e.id]={...e,children:[]}});let r=[];return e.forEach(e=>{null===e.parentId?r.push(t[e.id]):t[e.parentId].children.push(t[e.id])}),r})(await s.Z.query.$Categories.findMany())},48590:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/CategoryTabs.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/CategoryTabs.tsx","default")},37159:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/AddCategory.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/AddCategory.tsx","default")},29950:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/DeleteCategory.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/DeleteCategory.tsx","default")},17083:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/UpdateCategory.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/category/categoryTabs/UpdateCategory.tsx","default")},54619:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call ProductColumn() from the server but ProductColumn is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductColumn.tsx","ProductColumn")},69740:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx","default")},66091:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/CreateProductForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/CreateProductForm.tsx","default")},32169:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(79410),o=r(85890),a=r.n(o),n=r(95553);let i=new(a())(process.env.DB_FILE_NAME),l=(0,s.t)({client:i,schema:n})},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(33333),o=r(85890),a=r.n(o),n=r(84160);let i=new(a())(process.env.DB_FILE_NAME),l=(0,s.t)({client:i,schema:n})},95553:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>c,$Products:()=>p,$Users:()=>l,CategoryRelations:()=>f,ProductRelations:()=>b,insertCategorySchema:()=>d,insertProductSchema:()=>m,selectCategorySchema:()=>u,selectProductSchema:()=>h});var s=r(99437),o=r(43642),a=r(78657),n=r(81867),i=r(43951);let l=(0,o.Px)("users",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),email:(0,n.fL)().notNull().unique(),password_hash:(0,n.fL)().notNull(),salt:(0,n.fL)().notNull()}),c=(0,o.Px)("categories",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),name:(0,n.fL)("name").notNull(),parentId:(0,a._L)("parent_id").references(()=>c.id,{onDelete:"cascade"})}),d=(0,i.fC)(c),u=(0,i.IO)(c),f=(0,s.lE)(c,({one:e})=>({children:e(c,{fields:[c.parentId],references:[c.id]})})),p=(0,o.Px)("products",{id:(0,a._L)("id").primaryKey({autoIncrement:!0}),sku:(0,n.fL)("sku").notNull().unique(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description"),price:(0,a._L)("price").notNull().default(0),discount:(0,a._L)("discount").default(0),stock:(0,a._L)("stock").notNull().default(0),previewImage:(0,n.fL)("previewImage"),images:(0,n.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,a._L)("category_id").references(()=>c.id,{onDelete:"set null"}),keywordsSearch:(0,n.fL)("keywordsSearch"),isFeatured:(0,a._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,a._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.fL)("updatedAt").default(new Date().toISOString()).notNull()}),m=(0,i.fC)(p),h=(0,i.IO)(p),b=(0,s.lE)(p,({one:e})=>({category:e(c,{fields:[p.categoryId],references:[c.id]})}))},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>c,$Products:()=>p,$Users:()=>l,CategoryRelations:()=>f,ProductRelations:()=>b,insertCategorySchema:()=>d,insertProductSchema:()=>m,selectCategorySchema:()=>u,selectProductSchema:()=>h});var s=r(5357),o=r(89155),a=r(76718),n=r(20971),i=r(40745);let l=(0,o.Px)("users",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),email:(0,n.fL)().notNull().unique(),password_hash:(0,n.fL)().notNull(),salt:(0,n.fL)().notNull()}),c=(0,o.Px)("categories",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),name:(0,n.fL)("name").notNull(),parentId:(0,a._L)("parent_id").references(()=>c.id,{onDelete:"cascade"})}),d=(0,i.fC)(c),u=(0,i.IO)(c),f=(0,s.lE)(c,({one:e})=>({children:e(c,{fields:[c.parentId],references:[c.id]})})),p=(0,o.Px)("products",{id:(0,a._L)("id").primaryKey({autoIncrement:!0}),sku:(0,n.fL)("sku").notNull().unique(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description"),price:(0,a._L)("price").notNull().default(0),discount:(0,a._L)("discount").default(0),stock:(0,a._L)("stock").notNull().default(0),previewImage:(0,n.fL)("previewImage"),images:(0,n.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,a._L)("category_id").references(()=>c.id,{onDelete:"set null"}),keywordsSearch:(0,n.fL)("keywordsSearch"),isFeatured:(0,a._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,a._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.fL)("updatedAt").default(new Date().toISOString()).notNull()}),m=(0,i.fC)(p),h=(0,i.IO)(p),b=(0,s.lE)(p,({one:e})=>({category:e(c,{fields:[p.categoryId],references:[c.id]})}))},28893:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(6005);r(93977),r(49411);var o=r(80186);async function a(e,t=""){let{data:r,error:n}=await o.Z.storage.from("products").upload(`${t?t+"_":""}${(0,s.randomUUID)()}`,e);return n?(console.log("SAVE FILE ERROR",n),{ok:!1,error:n.message,data:{}}):{ok:!0,error:null,data:`${process.env.PROJECT_SUPABASE_URL}/storage/v1/object/public/${r.fullPath}`}}},80186:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(62132).eI)(process.env.PROJECT_SUPABASE_URL||"",process.env.PROJECT_SUPABASE_KEY||"")},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(15394);let o=async e=>[{type:"image/x-icon",sizes:"32x31",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},32528:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,146,394,704,711,653,275,210,850,540],()=>r(17638));module.exports=s})();
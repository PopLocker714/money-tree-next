(()=>{var e={};e.id=62,e.ids=[62],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},81779:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=r(70260),a=r(28203),n=r(25155),i=r.n(n),d=r(67292),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);r.d(t,o);let l=["",{children:["(cms)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5129)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,27922)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,27805)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(cms)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},34880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0043db7377118ae4cd953faab11b3911fa7d70785f":()=>s.A});var s=r(76449)},12071:()=>{},93919:()=>{},57103:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},65351:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},64678:(e,t,r)=>{Promise.resolve().then(r.bind(r,56428))},50766:(e,t,r)=>{Promise.resolve().then(r.bind(r,72177))},96487:()=>{},78335:()=>{},65201:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("ChartBarStacked",[["path",{d:"M11 13v4",key:"vyy2rb"}],["path",{d:"M15 5v4",key:"1gx88a"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]])},61606:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},87137:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},10985:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},30737:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Shrub",[["path",{d:"M12 22v-7l-2-2",key:"eqv9mc"}],["path",{d:"M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z",key:"ubcgy"}],["path",{d:"m14 14-2 2",key:"847xa2"}]])},45103:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(73864),a=r.n(s)},79334:(e,t,r)=>{"use strict";var s=r(58686);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},73864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return d}});let s=r(25488),a=r(42034),n=r(41902),i=s._(r(21628));function d(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=n.Image},72177:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var s=r(45512),a=r(28531),n=r.n(a);r(58009);var i=r(26248);let d=(0,i.createServerReference)("0043db7377118ae4cd953faab11b3911fa7d70785f",i.callServer,void 0,i.findSourceMapURL,"default");var o=r(45103);function l({href:e,children:t,currentPath:r,subChildren:a}){let i=r===e;return(0,s.jsxs)("li",{className:"nav-item",children:[(0,s.jsx)(n(),{className:`nav-link flex ${i?"active":""}`,"aria-current":"page",href:e,children:t}),(0,s.jsx)("ul",{className:"ml-8 nav flex-column nav-pills",children:a})]})}var c=r(79334),u=r(87137),m=r(10985),h=r(61606),p=r(30737),f=r(65201);function v(){let e=(0,c.usePathname)();return(0,s.jsxs)("aside",{className:"col-md-3",children:[(0,s.jsx)(n(),{className:"flex mt-2 mb-4",target:"_blank",href:"/",children:(0,s.jsx)(o.default,{src:"/Logo.png",alt:"Logo",width:"172",height:"56"})}),(0,s.jsxs)("ul",{className:"nav flex-column nav-pills ",children:[(0,s.jsxs)(l,{currentPath:e,href:"/dashboard",children:[(0,s.jsx)(u.A,{className:"mr-2"}),"Главная"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/orders",children:[(0,s.jsx)(m.A,{className:"mr-2"}),"Заказы"]}),(0,s.jsxs)(l,{subChildren:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/products/new",children:[(0,s.jsx)(h.A,{className:"mr-2"}),"Добавить товар"]})}),currentPath:e,href:"/dashboard/products",children:[(0,s.jsx)(p.A,{className:"mr-2"}),"Товары"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/categories",children:[(0,s.jsx)(f.A,{className:"mr-2"}),"Категории"]}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("form",{action:d,className:"d-flex",children:(0,s.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Выйти"})})})]})]})}},76449:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(21590);r(70376);var a=r(42385),n=r(99184);async function i(){(await (0,a.UL)()).set("session","",{expires:new Date(0)}),(0,n.redirect)("/login")}(0,r(99344).D)([i]),(0,s.A)(i,"0043db7377118ae4cd953faab11b3911fa7d70785f",null)},56428:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx","default")},27922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(62740),a=r(56428);async function n({children:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(a.default,{}),(0,s.jsx)("main",{className:"col-md-9",children:e})]})})})}},5129:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>i});var s=r(62740),a=r(29047),n=r(39187);let i={title:"Dashboard",description:""};async function d(){await (0,n.connection)();let e=(await a.A.query.$Products.findMany()).length,t=(await a.A.query.$Categories.findMany()).length;return(0,s.jsxs)("div",{className:"my-6",children:[(0,s.jsx)("h1",{className:"h3 mb-4",children:"Главная"}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("div",{className:"col-6 col-sm-3",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h5",{className:"card-title",children:"Количество товаров"}),(0,s.jsx)("p",{className:"card-text font-bold",children:e})]})})}),(0,s.jsx)("div",{className:"col-6 col-sm-3",children:(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("div",{className:"card-body",children:[(0,s.jsx)("h5",{className:"card-title",children:"Количество Категорий"}),(0,s.jsx)("p",{className:"card-text font-bold",children:t})]})})})]})]})}},27805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>a,viewport:()=>n});var s=r(62740);r(27209),r(11611);let a={title:"dashboard",description:""},n={width:"device-width",initialScale:1};function i({children:e}){return(0,s.jsx)("html",{lang:"ru",children:(0,s.jsx)("body",{children:e})})}},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(86084),a=r(87550),n=r.n(a),i=r(48590);let d=new(n())(process.env.DB_FILE_NAME),o=(0,s.f)({client:d,schema:i})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>l,$Products:()=>h,$Users:()=>o,CategoryRelations:()=>m,ProductRelations:()=>v,insertCategorySchema:()=>c,insertProductSchema:()=>p,selectCategorySchema:()=>u,selectProductSchema:()=>f});var s=r(23555),a=r(21300),n=r(47095),i=r(49190),d=r(78625);let o=(0,a.D)("users",{id:(0,n.Wh)().primaryKey({autoIncrement:!0}),email:(0,i.Qq)().notNull().unique(),password_hash:(0,i.Qq)().notNull(),salt:(0,i.Qq)().notNull()}),l=(0,a.D)("categories",{id:(0,n.Wh)().primaryKey({autoIncrement:!0}),name:(0,i.Qq)("name").notNull(),parentId:(0,n.nd)("parent_id").references(()=>l.id,{onDelete:"cascade"})}),c=(0,d.r)(l),u=(0,d.aJ)(l),m=(0,s.K1)(l,({one:e})=>({children:e(l,{fields:[l.parentId],references:[l.id]})})),h=(0,a.D)("products",{id:(0,n.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,i.Qq)("sku").notNull().unique(),title:(0,i.Qq)("title").notNull(),description:(0,i.Qq)("description"),price:(0,n.nd)("price").notNull().default(0),discount:(0,n.nd)("discount").default(0),stock:(0,n.nd)("stock").notNull().default(0),previewImage:(0,i.Qq)("previewImage"),images:(0,i.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,n.nd)("category_id").references(()=>l.id,{onDelete:"set null"}),keywordsSearch:(0,i.Qq)("keywordsSearch"),isFeatured:(0,n.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,n.nd)("isActive",{mode:"boolean"}).default(!0),deliveryInfo:(0,i.Qq)("deliveryInfo").default(""),createdAt:(0,i.Qq)("createdAt").$defaultFn(()=>new Date().toISOString()).notNull(),updatedAt:(0,i.Qq)("updatedAt").$defaultFn(()=>new Date().toISOString()).notNull()}),p=(0,d.r)(h),f=(0,d.aJ)(h),v=(0,s.K1)(h,({one:e})=>({category:e(l,{fields:[h.categoryId],references:[l.id]})}))},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"32x31",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},11611:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,641,77,715,595,568,187,342],()=>r(81779));module.exports=s})();
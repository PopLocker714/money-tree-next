(()=>{var e={};e.id=648,e.ids=[648],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},16761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>i});var s=r(49442),a=r(10042),o=r(48190),n=r.n(o),d=r(63289),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(t,l);let i=["",{children:["(cms)",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,53761)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,19069)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,17004)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(cms)/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},48170:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"004ba786a57e0d7a81d69cfed44b0f540be569869a":()=>s.Z});var s=r(96111)},56994:()=>{},13184:()=>{},12975:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,46472,23)),Promise.resolve().then(r.t.bind(r,42461,23)),Promise.resolve().then(r.t.bind(r,48190,23)),Promise.resolve().then(r.t.bind(r,15282,23)),Promise.resolve().then(r.t.bind(r,56613,23)),Promise.resolve().then(r.t.bind(r,5486,23)),Promise.resolve().then(r.t.bind(r,58825,23))},750:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52144,23)),Promise.resolve().then(r.t.bind(r,62302,23)),Promise.resolve().then(r.t.bind(r,63582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,65329,23)),Promise.resolve().then(r.t.bind(r,50599,23)),Promise.resolve().then(r.t.bind(r,62118,23))},18241:(e,t,r)=>{Promise.resolve().then(r.bind(r,53100))},28861:(e,t,r)=>{Promise.resolve().then(r.bind(r,43349))},5987:(e,t,r)=>{Promise.resolve().then(r.bind(r,54619)),Promise.resolve().then(r.bind(r,69740))},96682:(e,t,r)=>{Promise.resolve().then(r.bind(r,99461)),Promise.resolve().then(r.bind(r,17356))},37899:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("ChartBarStacked",[["path",{d:"M11 13v4",key:"vyy2rb"}],["path",{d:"M15 5v4",key:"1gx88a"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]])},16723:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},77973:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},2822:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},93383:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("Shrub",[["path",{d:"M12 22v-7l-2-2",key:"eqv9mc"}],["path",{d:"M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z",key:"ubcgy"}],["path",{d:"m14 14-2 2",key:"847xa2"}]])},4619:(e,t,r)=>{"use strict";var s=r(9877);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},43349:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var s=r(20149),a=r(85723);r(63606);var o=r(8412);let n=(0,o.createServerReference)("004ba786a57e0d7a81d69cfed44b0f540be569869a",o.callServer,void 0,o.findSourceMapURL,"default");var d=r(14971);function l({href:e,children:t,currentPath:r,subChildren:o}){let n=r===e;return(0,s.jsxs)("li",{className:"nav-item",children:[(0,s.jsx)(a.default,{className:`nav-link flex ${n?"active":""}`,"aria-current":"page",href:e,children:t}),(0,s.jsx)("ul",{className:"ml-8 nav flex-column nav-pills",children:o})]})}var i=r(4619),c=r(77973),u=r(2822),m=r(16723),h=r(93383),p=r(37899);function f(){let e=(0,i.usePathname)();return(0,s.jsxs)("aside",{className:"col-md-3",children:[(0,s.jsx)(a.default,{className:"flex mt-2 mb-4",target:"_blank",href:"/",children:(0,s.jsx)(d.default,{src:"/Logo.png",alt:"Logo",width:"172",height:"56"})}),(0,s.jsxs)("ul",{className:"nav flex-column nav-pills ",children:[(0,s.jsxs)(l,{currentPath:e,href:"/dashboard",children:[(0,s.jsx)(c.Z,{className:"mr-2"}),"Главная"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/orders",children:[(0,s.jsx)(u.Z,{className:"mr-2"}),"Заказы"]}),(0,s.jsxs)(l,{subChildren:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/products/new",children:[(0,s.jsx)(m.Z,{className:"mr-2"}),"Добавить товар"]})}),currentPath:e,href:"/dashboard/products",children:[(0,s.jsx)(h.Z,{className:"mr-2"}),"Товары"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/categories",children:[(0,s.jsx)(p.Z,{className:"mr-2"}),"Категории"]}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("form",{action:n,className:"d-flex",children:(0,s.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Выйти"})})})]})]})}},99461:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>a});var s=r(20149);let a=[{accessorKey:"title",header:"Название"},{accessorKey:"sku",header:"Артикул"},{accessorKey:"price",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Цена"}),cell:({row:e})=>{let t=parseFloat(e.getValue("price")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}},{accessorKey:"discount",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Скидка"}),cell:({row:e})=>{let t=parseFloat(e.getValue("discount")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}}]},17356:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),a=r(27552),o=r(69485),n=r(95860),d=r(4619);function l({columns:e,data:t}){let r=(0,a.b7)({data:t,columns:e,getCoreRowModel:(0,o.sC)(),getPaginationRowModel:(0,o.G_)()}),l=(0,d.useRouter)();return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(n.iA,{children:[(0,s.jsx)(n.xD,{children:r.getHeaderGroups().map(e=>(0,s.jsx)(n.SC,{children:e.headers.map(e=>(0,s.jsx)(n.ss,{children:e.isPlaceholder?null:(0,a.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(n.RM,{children:r.getRowModel().rows?.length?r.getRowModel().rows.map(e=>(0,s.jsx)(n.SC,{onClick:()=>l.push(`/dashboard/products/${e.original.id}`),"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(n.pj,{className:"cursor-pointer",children:(0,a.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(n.SC,{children:(0,s.jsx)(n.pj,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsx)("button",{onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),children:"Previous"}),(0,s.jsx)("button",{onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),children:"Next"})]})]})}},95860:(e,t,r)=>{"use strict";r.d(t,{iA:()=>l,RM:()=>c,pj:()=>h,ss:()=>m,xD:()=>i,SC:()=>u});var s=r(20149),a=r(63606),o=r(50836),n=r(88132);function d(...e){return(0,n.m6)((0,o.W)(e))}let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:d("w-full caption-bottom text-sm",e),...t})}));l.displayName="Table";let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:d("[&_tr]:border-b",e),...t}));i.displayName="TableHeader";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:d("[&_tr:last-child]:border-0",e),...t}));c.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));u.displayName="TableRow";let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));m.displayName="TableHead";let h=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));h.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:d("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},96111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(63722);r(20453);var a=r(64092),o=r(82557);async function n(){(await (0,a.Qk)()).set("session","",{expires:new Date(0)}),(0,o.redirect)("/login")}(0,r(46309).h)([n]),(0,s.j)(n,"004ba786a57e0d7a81d69cfed44b0f540be569869a",null)},53100:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx","default")},19069:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(47705),a=r(53100);async function o({children:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(a.default,{}),(0,s.jsx)("main",{className:"col-md-9",children:e})]})})})}},53761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>l});var s=r(47705),a=r(54619),o=r(69740),n=r(93726);async function d(){try{return await n.Z.query.$Products.findMany()}catch(e){return console.log(e),[]}}let l={title:"Products Dashboard",description:""};async function i(){let e=(await d()).map(e=>({id:e.id,title:e.title,sku:e.sku,price:e.price,discount:e.discount||0}));return(0,s.jsxs)("div",{className:"my-6",children:[(0,s.jsx)("h1",{className:"h3 mb-4",children:"Товары"}),(0,s.jsx)(o.default,{columns:a.ProductColumn,data:e})]})}},17004:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>a,viewport:()=>o});var s=r(47705);r(47453),r(32528);let a={title:"dashboard",description:""},o={width:"device-width",initialScale:1};function n({children:e}){return(0,s.jsx)("html",{lang:"ru",children:(0,s.jsx)("body",{children:e})})}},54619:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call ProductColumn() from the server but ProductColumn is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductColumn.tsx","ProductColumn")},69740:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx","default")},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(33333),a=r(85890),o=r.n(a),n=r(84160);let d=new(o())(process.env.DB_FILE_NAME),l=(0,s.t)({client:d,schema:n})},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>i,$Products:()=>h,$Users:()=>l,CategoryRelations:()=>m,ProductRelations:()=>x,insertCategorySchema:()=>c,insertProductSchema:()=>p,selectCategorySchema:()=>u,selectProductSchema:()=>f});var s=r(5357),a=r(89155),o=r(76718),n=r(20971),d=r(40745);let l=(0,a.Px)("users",{id:(0,o.e$)().primaryKey({autoIncrement:!0}),email:(0,n.fL)().notNull().unique(),password_hash:(0,n.fL)().notNull(),salt:(0,n.fL)().notNull()}),i=(0,a.Px)("categories",{id:(0,o.e$)().primaryKey({autoIncrement:!0}),name:(0,n.fL)("name").notNull(),parentId:(0,o._L)("parent_id").references(()=>i.id,{onDelete:"cascade"})}),c=(0,d.fC)(i),u=(0,d.IO)(i),m=(0,s.lE)(i,({one:e})=>({children:e(i,{fields:[i.parentId],references:[i.id]})})),h=(0,a.Px)("products",{id:(0,o._L)("id").primaryKey({autoIncrement:!0}),sku:(0,n.fL)("sku").notNull().unique(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description"),price:(0,o._L)("price").notNull().default(0),discount:(0,o._L)("discount").default(0),stock:(0,o._L)("stock").notNull().default(0),previewImage:(0,n.fL)("previewImage"),images:(0,n.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,o._L)("category_id").references(()=>i.id,{onDelete:"set null"}),keywordsSearch:(0,n.fL)("keywordsSearch"),isFeatured:(0,o._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,o._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.fL)("updatedAt").default(new Date().toISOString()).notNull()}),p=(0,d.fC)(h),f=(0,d.IO)(h),x=(0,s.lE)(h,({one:e})=>({category:e(i,{fields:[h.categoryId],references:[i.id]})}))},73881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(15394);let a=async e=>[{type:"image/x-icon",sizes:"32x31",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},32528:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,146,394,595,755,711,741,348],()=>r(16761));module.exports=s})();
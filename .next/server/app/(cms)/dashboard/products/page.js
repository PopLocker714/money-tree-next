(()=>{var e={};e.id=795,e.ids=[795],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},97277:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var s=r(70260),a=r(28203),n=r(25155),o=r.n(n),d=r(67292),i={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let l=["",{children:["(cms)",{children:["dashboard",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,34978)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,27922)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,27805)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(cms)/dashboard/products/page",pathname:"/dashboard/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},34880:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0043db7377118ae4cd953faab11b3911fa7d70785f":()=>s.A});var s=r(76449)},12071:()=>{},93919:()=>{},57103:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13219,23)),Promise.resolve().then(r.t.bind(r,34863,23)),Promise.resolve().then(r.t.bind(r,25155,23)),Promise.resolve().then(r.t.bind(r,40802,23)),Promise.resolve().then(r.t.bind(r,9350,23)),Promise.resolve().then(r.t.bind(r,48530,23)),Promise.resolve().then(r.t.bind(r,88921,23))},65351:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,66959,23)),Promise.resolve().then(r.t.bind(r,33875,23)),Promise.resolve().then(r.t.bind(r,88903,23)),Promise.resolve().then(r.t.bind(r,57174,23)),Promise.resolve().then(r.t.bind(r,84178,23)),Promise.resolve().then(r.t.bind(r,87190,23)),Promise.resolve().then(r.t.bind(r,61365,23))},64678:(e,t,r)=>{Promise.resolve().then(r.bind(r,56428))},50766:(e,t,r)=>{Promise.resolve().then(r.bind(r,72177))},58807:(e,t,r)=>{Promise.resolve().then(r.bind(r,52406)),Promise.resolve().then(r.bind(r,33006))},70479:(e,t,r)=>{Promise.resolve().then(r.bind(r,17114)),Promise.resolve().then(r.bind(r,77450))},65201:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("ChartBarStacked",[["path",{d:"M11 13v4",key:"vyy2rb"}],["path",{d:"M15 5v4",key:"1gx88a"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]])},61606:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},87137:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},10985:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},30737:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Shrub",[["path",{d:"M12 22v-7l-2-2",key:"eqv9mc"}],["path",{d:"M17 8v.8A6 6 0 0 1 13.8 20H10A6.5 6.5 0 0 1 7 8a5 5 0 0 1 10 0Z",key:"ubcgy"}],["path",{d:"m14 14-2 2",key:"847xa2"}]])},72177:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(45512),a=r(28531),n=r.n(a);r(58009);var o=r(26248);let d=(0,o.createServerReference)("0043db7377118ae4cd953faab11b3911fa7d70785f",o.callServer,void 0,o.findSourceMapURL,"default");var i=r(45103);function l({href:e,children:t,currentPath:r,subChildren:a}){let o=r===e;return(0,s.jsxs)("li",{className:"nav-item",children:[(0,s.jsx)(n(),{className:`nav-link flex ${o?"active":""}`,"aria-current":"page",href:e,children:t}),(0,s.jsx)("ul",{className:"ml-8 nav flex-column nav-pills",children:a})]})}var c=r(79334),u=r(87137),m=r(10985),h=r(61606),p=r(30737),f=r(65201);function x(){let e=(0,c.usePathname)();return(0,s.jsxs)("aside",{className:"col-md-3",children:[(0,s.jsx)(n(),{className:"flex mt-2 mb-4",target:"_blank",href:"/",children:(0,s.jsx)(i.default,{src:"/Logo.png",alt:"Logo",width:"172",height:"56"})}),(0,s.jsxs)("ul",{className:"nav flex-column nav-pills ",children:[(0,s.jsxs)(l,{currentPath:e,href:"/dashboard",children:[(0,s.jsx)(u.A,{className:"mr-2"}),"Главная"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/orders",children:[(0,s.jsx)(m.A,{className:"mr-2"}),"Заказы"]}),(0,s.jsxs)(l,{subChildren:(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/products/new",children:[(0,s.jsx)(h.A,{className:"mr-2"}),"Добавить товар"]})}),currentPath:e,href:"/dashboard/products",children:[(0,s.jsx)(p.A,{className:"mr-2"}),"Товары"]}),(0,s.jsxs)(l,{currentPath:e,href:"/dashboard/categories",children:[(0,s.jsx)(f.A,{className:"mr-2"}),"Категории"]}),(0,s.jsx)("li",{className:"nav-item",children:(0,s.jsx)("form",{action:d,className:"d-flex",children:(0,s.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",children:"Выйти"})})})]})]})}},17114:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>a});var s=r(45512);let a=[{accessorKey:"title",header:"Название"},{accessorKey:"sku",header:"Артикул"},{accessorKey:"price",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Цена"}),cell:({row:e})=>{let t=parseFloat(e.getValue("price")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}},{accessorKey:"discount",header:()=>(0,s.jsx)("div",{className:"text-right",children:"Скидка"}),cell:({row:e})=>{let t=parseFloat(e.getValue("discount")),r=new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",maximumFractionDigits:0}).format(t);return(0,s.jsx)("div",{className:"text-right font-medium",children:r})}}]},77450:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(45512),a=r(90001),n=r(83525),o=r(47630),d=r(79334);function i({columns:e,data:t}){let r=(0,a.N4)({data:t,columns:e,getCoreRowModel:(0,n.HT)(),getPaginationRowModel:(0,n.kW)()}),i=(0,d.useRouter)();return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:r.getHeaderGroups().map(e=>(0,s.jsx)(o.Hj,{children:e.headers.map(e=>(0,s.jsx)(o.nd,{children:e.isPlaceholder?null:(0,a.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(o.BF,{children:r.getRowModel().rows?.length?r.getRowModel().rows.map(e=>(0,s.jsx)(o.Hj,{onClick:()=>i.push(`/dashboard/products/${e.original.id}`),"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,s.jsx)(o.nA,{className:"cursor-pointer",children:(0,a.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(o.Hj,{children:(0,s.jsx)(o.nA,{colSpan:e.length,className:"h-24 text-center",children:"Похоже ничего не нашлось"})})})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 py-4",children:[(0,s.jsx)("button",{onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),children:"Previous"}),(0,s.jsx)("button",{onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),children:"Next"})]})]})}},47630:(e,t,r)=>{"use strict";r.d(t,{A0:()=>d,BF:()=>i,Hj:()=>l,XI:()=>o,nA:()=>u,nd:()=>c});var s=r(45512),a=r(58009),n=r(44195);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,n.cn)("w-full caption-bottom text-sm",e),...t})}));o.displayName="Table";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,n.cn)("[&_tr]:border-b",e),...t}));d.displayName="TableHeader";let i=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,n.cn)("[&_tr:last-child]:border-0",e),...t}));i.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));l.displayName="TableRow";let c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));c.displayName="TableHead";let u=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},44195:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(82281),a=r(94805);function n(...e){return(0,a.QP)((0,s.$)(e))}},76449:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(21590);r(70376);var a=r(42385),n=r(99184);async function o(){(await (0,a.UL)()).set("session","",{expires:new Date(0)}),(0,n.redirect)("/login")}(0,r(99344).D)([o]),(0,s.A)(o,"0043db7377118ae4cd953faab11b3911fa7d70785f",null)},56428:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/components/Aside/Aside.tsx","default")},27922:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(62740),a=r(56428);async function n({children:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(a.default,{}),(0,s.jsx)("main",{className:"col-md-9",children:e})]})})})}},34978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>l});var s=r(62740),a=r(52406),n=r(33006),o=r(29047);async function d(){try{return await o.A.query.$Products.findMany()}catch(e){return console.log(e),[]}}var i=r(39187);let l={title:"Products Dashboard",description:""};async function c(){await (0,i.connection)();let e=(await d()).map(e=>({id:e.id,title:e.title,sku:e.sku,price:e.price,discount:e.discount||0}));return(0,s.jsxs)("div",{className:"my-6",children:[(0,s.jsx)("h1",{className:"h3 mb-4",children:"Товары"}),(0,s.jsx)(n.default,{columns:a.ProductColumn,data:e})]})}},27805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a,viewport:()=>n});var s=r(62740);r(27209),r(11611);let a={title:"dashboard",description:""},n={width:"device-width",initialScale:1};function o({children:e}){return(0,s.jsx)("html",{lang:"ru",children:(0,s.jsx)("body",{children:e})})}},52406:(e,t,r)=>{"use strict";r.d(t,{ProductColumn:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call ProductColumn() from the server but ProductColumn is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductColumn.tsx","ProductColumn")},33006:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/ProductTable.tsx","default")},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(86084),a=r(87550),n=r.n(a),o=r(48590);let d=new(n())(process.env.DB_FILE_NAME),i=(0,s.f)({client:d,schema:o})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>l,$Products:()=>h,$Users:()=>i,CategoryRelations:()=>m,ProductRelations:()=>x,insertCategorySchema:()=>c,insertProductSchema:()=>p,selectCategorySchema:()=>u,selectProductSchema:()=>f});var s=r(23555),a=r(21300),n=r(47095),o=r(49190),d=r(78625);let i=(0,a.D)("users",{id:(0,n.Wh)().primaryKey({autoIncrement:!0}),email:(0,o.Qq)().notNull().unique(),password_hash:(0,o.Qq)().notNull(),salt:(0,o.Qq)().notNull()}),l=(0,a.D)("categories",{id:(0,n.Wh)().primaryKey({autoIncrement:!0}),name:(0,o.Qq)("name").notNull(),content:(0,o.Qq)("content"),parentId:(0,n.nd)("parent_id").references(()=>l.id,{onDelete:"cascade"})}),c=(0,d.r)(l),u=(0,d.aJ)(l),m=(0,s.K1)(l,({one:e})=>({children:e(l,{fields:[l.parentId],references:[l.id]})})),h=(0,a.D)("products",{id:(0,n.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,o.Qq)("sku").notNull().unique(),title:(0,o.Qq)("title").notNull(),description:(0,o.Qq)("description"),price:(0,n.nd)("price").notNull().default(0),discount:(0,n.nd)("discount").default(0),stock:(0,n.nd)("stock").notNull().default(0),previewImage:(0,o.Qq)("previewImage"),images:(0,o.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,n.nd)("category_id").references(()=>l.id,{onDelete:"set null"}),keywordsSearch:(0,o.Qq)("keywordsSearch"),isFeatured:(0,n.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,n.nd)("isActive",{mode:"boolean"}).default(!0),deliveryInfo:(0,o.Qq)("deliveryInfo").default(""),createdAt:(0,o.Qq)("createdAt").$defaultFn(()=>new Date().toISOString()).notNull(),updatedAt:(0,o.Qq)("updatedAt").$defaultFn(()=>new Date().toISOString()).notNull()}),p=(0,d.r)(h),f=(0,d.aJ)(h),x=(0,s.K1)(h,({one:e})=>({category:e(l,{fields:[h.categoryId],references:[l.id]})}))},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(88077);let a=async e=>[{type:"image/x-icon",sizes:"32x31",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},11611:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[994,641,77,715,595,621,187,568,342,726],()=>r(97277));module.exports=s})();
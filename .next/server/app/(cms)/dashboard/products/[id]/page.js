(()=>{var e={};e.id=235,e.ids=[235],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},76760:e=>{"use strict";e.exports=require("node:path")},64497:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>l,routeModule:()=>f,tree:()=>u});var o=r(70260),n=r(28203),i=r(25155),a=r.n(i),s=r(67292),d={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>s[e]);r.d(t,d);let u=["",{children:["(cms)",{children:["dashboard",{children:["products",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90680)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,27922)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,27805)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/[id]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},f=new o.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(cms)/dashboard/products/[id]/page",pathname:"/dashboard/products/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},82800:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0043db7377118ae4cd953faab11b3911fa7d70785f":()=>o.A,"608b8bb9552620ddfa4045a57981e1e760f20164f0":()=>h,"60eb2bc28634e054a29bbd150ad0f578efaa1e64fc":()=>y});var o=r(76449),n=r(21590);r(70376);var i=r(32496),a=r(70555),s=r(51455),d=r(76760),u=r.n(d),l=r(75380);async function c(e){if(e.includes("https://")){let t=e.replace(`${process.env.PROJECT_SUPABASE_URL}/storage/v1/object/public/products/`,""),{data:r}=await l.A.storage.from("products").remove([t]);return r}f(e)}async function f(e){let t=u().join(process.cwd(),e.replace("/api/file?pathname=",""));await (0,s.unlink)(t)}var p=r(33668),m=r(47735),b=r(99344);async function h(e,t){let r=t.get("id");if(!r)return{error:"Something went wrong",ok:!1,data:{}};try{let e=await i.A.query.$Products.findFirst({where:(0,p.eq)(a.$Products.id,Number(r))});if(e&&(e.previewImage&&await c(e.previewImage),e.images))for(let t of JSON.parse(e.images))t&&await c(t);let t=await i.A.delete(a.$Products).where((0,p.eq)(a.$Products.id,Number(r)));return(0,m.revalidateTag)("product-home"),{error:null,data:t,ok:!1}}catch(e){if(e instanceof Error)return{error:e.message,data:{},ok:!1};return{error:"Something went wrong",data:{},ok:!1}}}(0,b.D)([h]),(0,n.A)(h,"608b8bb9552620ddfa4045a57981e1e760f20164f0",null);var x=r(29432);async function y(e,t){let r;let o=a.insertProductSchema.safeParse({id:Number(t.get("id")),title:t.get("title"),description:t.get("description"),sku:t.get("sku"),price:Number(t.get("price"))||void 0,discount:Number(t.get("discount"))||void 0,stock:Number(t.get("stock"))||void 0,categoryId:Number(t.get("categoryId"))||void 0,keywordsSearch:t.get("keywordsSearch"),isFeatured:"on"===t.get("isFeatured"),isActive:"on"===t.get("isActive"),deliveryInfo:t.get("deliveryInfo")});if(!o.success)return{error:o.error.flatten().fieldErrors,ok:!1,data:{}};if(!o.data.id)return{error:"Something went wrong",ok:!1,data:{}};let n=[t.get("image1"),t.get("image2"),t.get("image3"),t.get("image4"),t.get("image5")],s=[];try{r=await i.A.query.$Products.findFirst({where:(0,p.eq)(a.$Products.id,o.data.id)});let e=r?.images?JSON.parse(r.images):[null,null,null,null,null];if(!r)throw Error("Product not found");s=n.map(async(t,r)=>{if(!t||!(t instanceof Blob))throw Error("Файл не найден или неправильный формат");if(0===t.size)return e[r];let o=await (0,x.l)(t,`${r}`);if(e[r]&&await c(e[r]),!o.ok)throw Error(o.error||"Не удалось сохранить изображение");return"string"==typeof o.data?o.data:null})}catch(e){if(console.log(e),e instanceof Error)return{ok:!1,error:e.message,data:{}};return{ok:!1,error:"Unknown error",data:{}}}let d=t.get("preview");if(!d||!(d instanceof Blob))return{error:"Файл не найден или неправильный формат",ok:!1,data:{}};let u=null;if(d&&d.size>0){let e=await (0,x.l)(d,"preview");if("string"==typeof e.data&&(u=e.data,r?.previewImage&&await c(r.previewImage)),e.error)return{error:e.error,ok:!1,data:{}}}try{u&&(o.data.previewImage=u);let e=JSON.stringify(await Promise.all(s)),t={...o.data,updatedAt:new Date().toISOString(),images:e},r=await i.A.update(a.$Products).set(t).where((0,p.eq)(a.$Products.id,o.data.id)).returning();return(0,m.revalidateTag)("product-home"),{error:null,data:r,ok:!0}}catch(e){if(e instanceof Error)return{error:e.message,ok:!1,data:{}};return{error:"Something went wrong",ok:!1,data:{}}}}(0,b.D)([y]),(0,n.A)(y,"60eb2bc28634e054a29bbd150ad0f578efaa1e64fc",null)},20022:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,59607,23)),Promise.resolve().then(r.t.bind(r,71066,23)),Promise.resolve().then(r.bind(r,22774)),Promise.resolve().then(r.bind(r,47635))},15294:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,28531,23)),Promise.resolve().then(r.t.bind(r,41902,23)),Promise.resolve().then(r.bind(r,74487)),Promise.resolve().then(r.bind(r,39807))},74487:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var o=r(45512),n=r(58009),i=r(21936),a=r(26248);let s=(0,a.createServerReference)("608b8bb9552620ddfa4045a57981e1e760f20164f0",a.callServer,void 0,a.findSourceMapURL,"deleteProductActon");function d({product:e}){let[t,r,a]=(0,n.useActionState)(s,{data:{},ok:!1,error:null});return void 0===e?(0,o.jsx)("div",{children:"Product not found"}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{className:"flex flex-col max-w-[400px] flex-1 mb-4",action:r,children:[(0,o.jsx)(i.A,{hidden:!0,label:"id",defaultValue:e.id,type:"number",name:"id",id:"id",placeholder:"id",required:!0}),t.error&&(0,o.jsx)("pre",{children:JSON.stringify(t)}),(0,o.jsx)("button",{disabled:a,className:"bg-red-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-red-500 disabled:bg-gray-400",type:"submit",children:"Удалить"})]})})}},39807:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var o=r(45512),n=r(58009),i=r(21936),a=r(52916),s=r(42748),d=r(26248);let u=(0,d.createServerReference)("60eb2bc28634e054a29bbd150ad0f578efaa1e64fc",d.callServer,void 0,d.findSourceMapURL,"default");function l({product:e}){let[t,r,d]=(0,n.useActionState)(u,{error:null,data:{}}),l=JSON.parse(e.images||"[]");if(l.length<5)for(let e=l.length;e<5;e++)l.push(null);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{className:"flex flex-col mb-4",action:r,children:[(0,o.jsxs)("div",{className:"flex w-full justify-between",children:[(0,o.jsxs)("div",{className:"flex-1 max-w-[400px] mr-4",children:[(0,o.jsx)(i.A,{label:"Название",defaultValue:e.title,type:"text",name:"title",id:"title",placeholder:"Название",required:!0}),(0,o.jsx)(a.A,{label:"Описание",defaultValue:e.description||"",name:"description",id:"description",placeholder:"Описание"}),(0,o.jsx)(i.A,{label:"Артикул",defaultValue:e.sku,type:"text",name:"sku",id:"sku",placeholder:"Артикул",required:!0}),(0,o.jsx)(i.A,{label:"Цена",defaultValue:e.price,type:"number",name:"price",id:"price",placeholder:"Цена",required:!0})]}),(0,o.jsxs)("div",{className:"flex-1 mr-4",children:[(0,o.jsx)(i.A,{label:"Скидка",defaultValue:e.discount||0,type:"number",name:"discount",id:"discount",placeholder:"Скидка"}),(0,o.jsx)(i.A,{label:"Наличие",defaultValue:e.stock,type:"number",name:"stock",id:"stock",placeholder:"Наличие",required:!0}),(0,o.jsx)(i.A,{label:"Категория",defaultValue:e.categoryId||"",type:"text",name:"categoryId",id:"categoryId",placeholder:"Категория [id]"}),(0,o.jsx)(i.A,{label:"Ключевые слова",defaultValue:e.keywordsSearch||"",type:"text",name:"keywordsSearch",id:"keywordsSearch",placeholder:"Ключевые слова"}),(0,o.jsx)(i.A,{name:"deliveryInfo",id:"deliveryInfo",label:"Информация о доставке",defaultValue:e.deliveryInfo||"",type:"text",placeholder:"Информация о доставке"})]})]}),(0,o.jsx)(i.A,{hidden:!0,label:"id",defaultValue:e.id,type:"number",name:"id",id:"id",placeholder:"id",required:!0}),(0,o.jsx)(i.A,{defaultChecked:e.isFeatured||void 0,label:"Добавить на главный экран",type:"checkbox",name:"isFeatured",id:"isFeatured"}),(0,o.jsx)(i.A,{defaultChecked:e.isActive||void 0,label:"Активировать",type:"checkbox",name:"isActive",id:"isActive"}),(0,o.jsx)(s.A,{label:"Превью",keyName:"preview",initialValue:e.previewImage}),(0,o.jsx)("h2",{className:"text-2xl mb-1",children:"Галерея"}),(0,o.jsx)("div",{className:"flex flex-wrap",children:l.map((e,t)=>(0,o.jsx)(s.A,{label:`Изображение ${t+1}`,keyName:`image${t+1}`,initialValue:e},e+`${t+1}`))}),t.error&&(0,o.jsx)("pre",{children:JSON.stringify(t)}),(0,o.jsx)("button",{disabled:d,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Обновить"})]})})}},31831:(e,t,r)=>{"use strict";var o=r(67359);r.o(o,"redirect")&&r.d(t,{redirect:function(){return o.redirect}})},46347:(e,t,r)=>{"use strict";function o(){throw Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"forbidden",{enumerable:!0,get:function(){return o}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11271:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return i}});let o=r(26003),n=r(23543);function i(e){return(0,n.isRedirectError)(e)||(0,o.isHTTPAccessFallbackError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},67359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return n.RedirectType},forbidden:function(){return a.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return o.permanentRedirect},redirect:function(){return o.redirect},unauthorized:function(){return s.unauthorized},unstable_rethrow:function(){return d.unstable_rethrow}});let o=r(26552),n=r(23543),i=r(39274),a=r(46347),s=r(10590),d=r(51370);class u extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new u}delete(){throw new u}set(){throw new u}sort(){throw new u}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},39274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"notFound",{enumerable:!0,get:function(){return n}});let o=""+r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function n(){let e=Error(o);throw e.digest=o,e}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},23543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{REDIRECT_ERROR_CODE:function(){return n},RedirectType:function(){return i},isRedirectError:function(){return a}});let o=r(11541),n="NEXT_REDIRECT";var i=function(e){return e.push="push",e.replace="replace",e}({});function a(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,i]=t,a=t.slice(2,-2).join(";"),s=Number(t.at(-2));return r===n&&("replace"===i||"push"===i)&&"string"==typeof a&&!isNaN(s)&&s in o.RedirectStatusCode}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},11541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}});var r=function(e){return e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e}({});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},26552:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return c},getRedirectTypeFromError:function(){return l},getURLFromRedirectError:function(){return u},permanentRedirect:function(){return d},redirect:function(){return s}});let o=r(19121),n=r(11541),i=r(23543);function a(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Error(i.REDIRECT_ERROR_CODE);return o.digest=i.REDIRECT_ERROR_CODE+";"+t+";"+e+";"+r+";",o}function s(e,t){let r=o.actionAsyncStorage.getStore();throw a(e,t||((null==r?void 0:r.isAction)?i.RedirectType.push:i.RedirectType.replace),n.RedirectStatusCode.TemporaryRedirect)}function d(e,t){throw void 0===t&&(t=i.RedirectType.replace),a(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){return(0,i.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function l(e){if(!(0,i.isRedirectError)(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function c(e){if(!(0,i.isRedirectError)(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},10590:(e,t,r)=>{"use strict";function o(){throw Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled.")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unauthorized",{enumerable:!0,get:function(){return o}}),r(26003).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},51370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,i.isBailoutToCSRError)(t)||(0,o.isDynamicUsageError)(t)||(0,n.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let o=r(62349),n=r(67418),i=r(40627),a=r(11271);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},62349:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return s}});let o=r(42490),n=r(40627),i=r(11271),a=r(10436),s=e=>(0,o.isDynamicServerError)(e)||(0,n.isBailoutToCSRError)(e)||(0,i.isNextRouterError)(e)||(0,a.isDynamicPostpone)(e)},67418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return o}});let r=Symbol.for("react.postpone");function o(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},40627:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return o},isBailoutToCSRError:function(){return n}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class o extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},90680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,metadata:()=>c});var o=r(62740),n=r(22774),i=r(47635),a=r(12562),s=r(29047),d=r(48590),u=r(47579),l=r(31831);let c={title:"Product Dashboard",description:""};async function f({params:e}){let t;let{id:r}=await e;try{t=await s.A.query.$Products.findFirst({where:(0,u.eq)(d.$Products.id,r)})}catch(e){console.log(e)}return t||(0,l.redirect)("/dashboard"),(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{children:[(0,o.jsx)(a.A,{className:"my-6",cost:t.price,discount:t.discount,id:t.id?.toString()||"",image:t.previewImage,title:t.title}),(0,o.jsx)(i.default,{product:t}),(0,o.jsx)(n.default,{product:t})]})})}},22774:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/DeleteForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/DeleteForm.tsx","default")},47635:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/UpdateProductForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/UpdateProductForm.tsx","default")},12562:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(62740),n=r(13673),i=r(35635),a=r(59607),s=r.n(a);r(76301);let d=function({cost:e=0,discount:t,id:r,image:a,title:d,className:u}){return(0,o.jsxs)(s(),{className:(0,n.A)("relative flex flex-col overflow-hidden max-w-[266px] rounded-3xl shadow-[0px_0px_16px_0_rgba(51,37,87,0.15)] transition-shadow hover:shadow-[0px_0px_16px_0_rgba(51,37,87,0.3)]",u),href:`/product/${r}`,children:[t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"absolute top-4 right-4 bg-red-500 text-white-100  text-sm font-medium p-[6px] rounded-full",children:"Распродажа"}),(0,o.jsxs)("span",{className:"absolute top-4 left-4  bg-red-500 text-white-100 text-sm font-medium p-[6px] rounded-full",children:[Math.floor(100-(e-t)/e*100),"%"]})]}):null,(0,o.jsx)(i.default,{className:"max-w-[266px] max-h-[235px] object-cover",alt:d,width:266,height:235,src:a||"https://placehold.co/266x235/000000/FFFFFF/png"}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h3",{className:"text-base text-foreground mb-4",children:d}),t?(0,o.jsxs)("p",{className:"text-green-400 flex items-center text-xl w-fit rounded-xl py-3 px-6 bg-gray-100 ",children:[e-t,"₽ ",(0,o.jsxs)("span",{className:"line-through ml-1 text-gray-400 text-xs",children:[e,"₽"]})]}):(0,o.jsxs)("p",{className:"text-foreground flex text-xl w-fit rounded-xl py-3 px-6 bg-gray-100",children:[e,"₽"]})]})]},r)}},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var o=r(86084),n=r(87550),i=r.n(n),a=r(48590);let s=new(i())(process.env.DB_FILE_NAME),d=(0,o.f)({client:s,schema:a})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>u,$Products:()=>p,$Users:()=>d,CategoryRelations:()=>f,ProductRelations:()=>h,insertCategorySchema:()=>l,insertProductSchema:()=>m,selectCategorySchema:()=>c,selectProductSchema:()=>b});var o=r(23555),n=r(21300),i=r(47095),a=r(49190),s=r(78625);let d=(0,n.D)("users",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),email:(0,a.Qq)().notNull().unique(),password_hash:(0,a.Qq)().notNull(),salt:(0,a.Qq)().notNull()}),u=(0,n.D)("categories",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),name:(0,a.Qq)("name").notNull(),parentId:(0,i.nd)("parent_id").references(()=>u.id,{onDelete:"cascade"})}),l=(0,s.r)(u),c=(0,s.aJ)(u),f=(0,o.K1)(u,({one:e})=>({children:e(u,{fields:[u.parentId],references:[u.id]})})),p=(0,n.D)("products",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,a.Qq)("sku").notNull().unique(),title:(0,a.Qq)("title").notNull(),description:(0,a.Qq)("description"),price:(0,i.nd)("price").notNull().default(0),discount:(0,i.nd)("discount").default(0),stock:(0,i.nd)("stock").notNull().default(0),previewImage:(0,a.Qq)("previewImage"),images:(0,a.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,i.nd)("category_id").references(()=>u.id,{onDelete:"set null"}),keywordsSearch:(0,a.Qq)("keywordsSearch"),isFeatured:(0,i.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,i.nd)("isActive",{mode:"boolean"}).default(!0),deliveryInfo:(0,a.Qq)("deliveryInfo").default(""),createdAt:(0,a.Qq)("createdAt").$defaultFn(()=>new Date().toISOString()).notNull(),updatedAt:(0,a.Qq)("updatedAt").$defaultFn(()=>new Date().toISOString()).notNull()}),m=(0,s.r)(p),b=(0,s.aJ)(p),h=(0,o.K1)(p,({one:e})=>({category:e(u,{fields:[p.categoryId],references:[u.id]})}))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,641,77,715,595,568,837,342,422,480,656,818],()=>r(64497));module.exports=o})();
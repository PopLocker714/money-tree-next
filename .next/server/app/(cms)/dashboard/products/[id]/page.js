(()=>{var e={};e.id=322,e.ids=[322],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},93977:e=>{"use strict";e.exports=require("node:fs/promises")},49411:e=>{"use strict";e.exports=require("node:path")},5197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>f,tree:()=>l});var o=r(49442),s=r(10042),n=r(48190),a=r.n(n),i=r(63289),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let l=["",{children:["(cms)",{children:["dashboard",{children:["products",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,65332)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,19069)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,17004)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(cms)/dashboard/products/[id]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},f=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(cms)/dashboard/products/[id]/page",pathname:"/dashboard/products/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},51342:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"004ba786a57e0d7a81d69cfed44b0f540be569869a":()=>o.Z,"602386b55223fcc338d2106e0bdfff44d7a3f3f3ee":()=>p,"60a5b869ca4645c8d08ae632fe74b8d531c5a58bbe":()=>c});var o=r(96111),s=r(63722);r(20453);var n=r(32169),a=r(95553);r(93977),r(49411);var i=r(80186);async function d(e){let t=e.replace(`${process.env.PROJECT_SUPABASE_URL}/storage/v1/object/public/products/`,""),{data:r}=await i.Z.storage.from("products").remove([t]);return r}var l=r(20754),u=r(46309);async function c(e,t){let r=t.get("id");if(!r)return{error:"Something went wrong",ok:!1,data:{}};try{let e=await n.Z.query.$Products.findFirst({where:(0,l.eq)(a.$Products.id,Number(r))});if(e&&(e.previewImage&&await d(e.previewImage),e.images))for(let t of JSON.parse(e.images))t&&await d(t);let t=await n.Z.delete(a.$Products).where((0,l.eq)(a.$Products.id,Number(r)));return{error:null,data:t,ok:!1}}catch(e){if(e instanceof Error)return{error:e.message,data:{},ok:!1};return{error:"Something went wrong",data:{},ok:!1}}}(0,u.h)([c]),(0,s.j)(c,"60a5b869ca4645c8d08ae632fe74b8d531c5a58bbe",null);var f=r(28893);async function p(e,t){let r;let o=a.insertProductSchema.safeParse({id:Number(t.get("id")),title:t.get("title"),description:t.get("description"),sku:t.get("sku"),price:Number(t.get("price"))||void 0,discount:Number(t.get("discount"))||void 0,stock:Number(t.get("stock"))||void 0,categoryId:Number(t.get("categoryId"))||void 0,keywordsSearch:t.get("keywordsSearch"),isFeatured:"on"===t.get("isFeatured"),isActive:"on"===t.get("isActive")});if(!o.success)return{error:o.error.flatten().fieldErrors,ok:!1,data:{}};if(!o.data.id)return{error:"Something went wrong",ok:!1,data:{}};let s=[t.get("image1"),t.get("image2"),t.get("image3"),t.get("image4"),t.get("image5")],i=[];try{r=await n.Z.query.$Products.findFirst({where:(0,l.eq)(a.$Products.id,o.data.id)});let e=r?.images?JSON.parse(r.images):[null,null,null,null,null];if(!r)throw Error("Product not found");i=s.map(async(t,r)=>{if(!t||!(t instanceof Blob))throw Error("Файл не найден или неправильный формат");if(0===t.size)return e[r];let o=await (0,f.Z)(t,`${r}`);if(e[r]&&await d(e[r]),!o.ok)throw Error(o.error||"Не удалось сохранить изображение");return"string"==typeof o.data?o.data:null})}catch(e){if(console.log(e),e instanceof Error)return{ok:!1,error:e.message,data:{}};return{ok:!1,error:"Unknown error",data:{}}}let u=t.get("preview");if(!u||!(u instanceof Blob))return{error:"Файл не найден или неправильный формат",ok:!1,data:{}};let c=null;if(u&&u.size>0){let e=await (0,f.Z)(u,"preview");if("string"==typeof e.data&&(c=e.data,r?.previewImage&&await d(r.previewImage)),e.error)return{error:e.error,ok:!1,data:{}}}try{c&&(o.data.previewImage=c);let e=JSON.stringify(await Promise.all(i)),t={...o.data,updatedAt:new Date().toISOString(),images:e},r=await n.Z.update(a.$Products).set(t).where((0,l.eq)(a.$Products.id,o.data.id)).returning();return{error:null,data:r,ok:!0}}catch(e){if(e instanceof Error)return{error:e.message,ok:!1,data:{}};return{error:"Something went wrong",ok:!1,data:{}}}}(0,u.h)([p]),(0,s.j)(p,"602386b55223fcc338d2106e0bdfff44d7a3f3f3ee",null)},55877:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,60903,23)),Promise.resolve().then(r.t.bind(r,90821,23)),Promise.resolve().then(r.bind(r,22477)),Promise.resolve().then(r.bind(r,60592))},60306:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,62704,23)),Promise.resolve().then(r.t.bind(r,73510,23)),Promise.resolve().then(r.bind(r,21929)),Promise.resolve().then(r.bind(r,98594))},21929:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var o=r(20149),s=r(63606),n=r(61307),a=r(8412);let i=(0,a.createServerReference)("60a5b869ca4645c8d08ae632fe74b8d531c5a58bbe",a.callServer,void 0,a.findSourceMapURL,"deleteProductActon");function d({product:e}){let[t,r,a]=(0,s.useActionState)(i,{data:{},ok:!1,error:null});return void 0===e?(0,o.jsx)("div",{children:"Product not found"}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{className:"flex flex-col max-w-[400px] flex-1 mb-4",action:r,children:[(0,o.jsx)(n.Z,{hidden:!0,label:"id",defaultValue:e.id,type:"number",name:"id",id:"id",placeholder:"id",required:!0}),t.error&&(0,o.jsx)("pre",{children:JSON.stringify(t)}),(0,o.jsx)("button",{disabled:a,className:"bg-red-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-red-500 disabled:bg-gray-400",type:"submit",children:"Удалить"})]})})}},98594:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var o=r(20149),s=r(63606),n=r(61307),a=r(81775),i=r(42347),d=r(8412);let l=(0,d.createServerReference)("602386b55223fcc338d2106e0bdfff44d7a3f3f3ee",d.callServer,void 0,d.findSourceMapURL,"default");function u({product:e}){let[t,r,d]=(0,s.useActionState)(l,{error:null,data:{}}),u=JSON.parse(e.images||"[]");if(u.length<5)for(let e=u.length;e<5;e++)u.push(null);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("form",{className:"flex flex-col mb-4",action:r,children:[(0,o.jsxs)("div",{className:"flex w-full justify-between",children:[(0,o.jsxs)("div",{className:"flex-1 max-w-[400px] mr-4",children:[(0,o.jsx)(n.Z,{label:"Название",defaultValue:e.title,type:"text",name:"title",id:"title",placeholder:"Название",required:!0}),(0,o.jsx)(a.Z,{label:"Описание",defaultValue:e.description||"",name:"description",id:"description",placeholder:"Описание"}),(0,o.jsx)(n.Z,{label:"Артикул",defaultValue:e.sku,type:"text",name:"sku",id:"sku",placeholder:"Артикул",required:!0}),(0,o.jsx)(n.Z,{label:"Цена",defaultValue:e.price,type:"number",name:"price",id:"price",placeholder:"Цена",required:!0})]}),(0,o.jsxs)("div",{className:"flex-1 mr-4",children:[(0,o.jsx)(n.Z,{label:"Скидка",defaultValue:e.discount||0,type:"number",name:"discount",id:"discount",placeholder:"Скидка"}),(0,o.jsx)(n.Z,{label:"Наличие",defaultValue:e.stock,type:"number",name:"stock",id:"stock",placeholder:"Наличие",required:!0}),(0,o.jsx)(n.Z,{label:"Категория",defaultValue:e.categoryId||"",type:"text",name:"categoryId",id:"categoryId",placeholder:"Категория [id]"}),(0,o.jsx)(n.Z,{label:"Ключевые слова",defaultValue:e.keywordsSearch||"",type:"text",name:"keywordsSearch",id:"keywordsSearch",placeholder:"Ключевые слова"})]})]}),(0,o.jsx)(n.Z,{hidden:!0,label:"id",defaultValue:e.id,type:"number",name:"id",id:"id",placeholder:"id",required:!0}),(0,o.jsx)(n.Z,{defaultChecked:e.isFeatured||void 0,label:"Добавить на главный экран",type:"checkbox",name:"isFeatured",id:"isFeatured"}),(0,o.jsx)(n.Z,{defaultChecked:e.isActive||void 0,label:"Активировать",type:"checkbox",name:"isActive",id:"isActive"}),(0,o.jsx)(i.Z,{label:"Превью",keyName:"preview",initialValue:e.previewImage}),(0,o.jsx)("h2",{className:"text-2xl mb-1",children:"Галерея"}),(0,o.jsx)("div",{className:"flex flex-wrap",children:u.map((e,t)=>(0,o.jsx)(i.Z,{label:`Изображение ${t+1}`,keyName:`image${t+1}`,initialValue:e},e+`${t+1}`))}),t.error&&(0,o.jsx)("pre",{children:JSON.stringify(t)}),(0,o.jsx)("button",{disabled:d,className:"bg-orange-400 rounded-2xl py-4 px-6 text-base border-none mt-8 text-white-100 hover:bg-orange-500 disabled:bg-gray-400",type:"submit",children:"Обновить"})]})})}},71623:(e,t,r)=>{"use strict";var o=r(85941);r.o(o,"redirect")&&r.d(t,{redirect:function(){return o.redirect}})},46898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return n}});let o=r(77361),s=r(14722);function n(e){return(0,s.isRedirectError)(e)||(0,o.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return o.RedirectType},notFound:function(){return s.notFound},permanentRedirect:function(){return o.permanentRedirect},redirect:function(){return o.redirect},unstable_rethrow:function(){return n.unstable_rethrow}});let o=r(14722),s=r(77361),n=r(29097);class a extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new a}delete(){throw new a}set(){throw new a}sort(){throw new a}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14852:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14722:(e,t,r)=>{"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return o},getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return c},isRedirectError:function(){return u},permanentRedirect:function(){return l},redirect:function(){return d}});let s=r(209),n=r(14852),a="NEXT_REDIRECT";function i(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let o=Error(a);return o.digest=a+";"+t+";"+e+";"+r+";",o}function d(e,t){let r=s.actionAsyncStorage.getStore();throw i(e,t||((null==r?void 0:r.isAction)?"push":"replace"),n.RedirectStatusCode.TemporaryRedirect)}function l(e,t){throw void 0===t&&(t="replace"),i(e,t,n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,s=t.slice(2,-2).join(";"),i=Number(t.at(-2));return r===a&&("replace"===o||"push"===o)&&"string"==typeof s&&!isNaN(i)&&i in n.RedirectStatusCode}function c(e){return u(e)?e.digest.split(";").slice(2,-2).join(";"):null}function f(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}(function(e){e.push="push",e.replace="replace"})(o||(o={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},29097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,n.isBailoutToCSRError)(t)||(0,o.isDynamicUsageError)(t)||(0,s.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let o=r(66714),s=r(15730),n=r(38465),a=r(46898);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},66714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return i}});let o=r(3105),s=r(38465),n=r(46898),a=r(94375),i=e=>(0,o.isDynamicServerError)(e)||(0,s.isBailoutToCSRError)(e)||(0,n.isNextRouterError)(e)||(0,a.isDynamicPostpone)(e)},15730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return o}});let r=Symbol.for("react.postpone");function o(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},38465:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return o},isBailoutToCSRError:function(){return s}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class o extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},65332:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,metadata:()=>c});var o=r(47705),s=r(22477),n=r(60592),a=r(38176),i=r(93726),d=r(84160),l=r(99069),u=r(71623);let c={title:"Product Dashboard",description:""};async function f({params:e}){let t;let{id:r}=await e;try{t=await i.Z.query.$Products.findFirst({where:(0,l.eq)(d.$Products.id,r)})}catch(e){console.log(e)}return t||(0,u.redirect)("/dashboard"),(0,o.jsx)("div",{className:"container",children:(0,o.jsxs)("div",{children:[(0,o.jsx)(a.Z,{className:"my-6",cost:t.price,discount:t.discount,id:t.id?.toString()||"",image:t.previewImage,title:t.title}),(0,o.jsx)(n.default,{product:t}),(0,o.jsx)(s.default,{product:t})]})})}},22477:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/DeleteForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/DeleteForm.tsx","default")},60592:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/UpdateProductForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/dashboard/products/forms/UpdateProductForm.tsx","default")},38176:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var o=r(47705);let s=function(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,o,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(o=e(t[r]))&&(s&&(s+=" "),s+=o)}else for(o in t)t[o]&&(s&&(s+=" "),s+=o)}return s}(e))&&(o&&(o+=" "),o+=t);return o};var n=r(76217),a=r(23496);r(66833);let i=function({cost:e=0,discount:t,id:r,image:i,title:d,className:l}){return(0,o.jsxs)(a.default,{className:s("relative flex flex-col overflow-hidden max-w-[266px] rounded-3xl shadow-[0px_0px_16px_0_rgba(51,37,87,0.15)]",l),href:`/product/${r}`,children:[t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"absolute top-4 right-4 bg-red-500 text-white-100  text-sm font-medium p-[6px] rounded-full",children:"Распродажа"}),(0,o.jsxs)("span",{className:"absolute top-4 left-4  bg-red-500 text-white-100 text-sm font-medium p-[6px] rounded-full",children:[Math.floor(100-(e-t)/e*100),"%"]})]}):null,(0,o.jsx)(n.default,{className:"max-w-[266px] max-h-[235px]",alt:d,width:266,height:235,src:i||"https://placehold.co/266x235/000000/FFFFFF/png"}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h3",{className:"text-base text-foreground mb-4",children:d}),t?(0,o.jsxs)("p",{className:"text-green-400 flex items-center text-xl w-fit rounded-xl py-3 px-6 bg-gray-100 ",children:[e-t,"₽ ",(0,o.jsxs)("span",{className:"line-through ml-1 text-gray-400 text-xs",children:[e,"₽"]})]}):(0,o.jsxs)("p",{className:"text-foreground flex text-xl w-fit rounded-xl py-3 px-6 bg-gray-100",children:[e,"₽"]})]})]},r)}},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var o=r(33333),s=r(85890),n=r.n(s),a=r(84160);let i=new(n())(process.env.DB_FILE_NAME),d=(0,o.t)({client:i,schema:a})},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>l,$Products:()=>p,$Users:()=>d,CategoryRelations:()=>f,ProductRelations:()=>b,insertCategorySchema:()=>u,insertProductSchema:()=>m,selectCategorySchema:()=>c,selectProductSchema:()=>h});var o=r(5357),s=r(89155),n=r(76718),a=r(20971),i=r(40745);let d=(0,s.Px)("users",{id:(0,n.e$)().primaryKey({autoIncrement:!0}),email:(0,a.fL)().notNull().unique(),password_hash:(0,a.fL)().notNull(),salt:(0,a.fL)().notNull()}),l=(0,s.Px)("categories",{id:(0,n.e$)().primaryKey({autoIncrement:!0}),name:(0,a.fL)("name").notNull(),parentId:(0,n._L)("parent_id").references(()=>l.id,{onDelete:"cascade"})}),u=(0,i.fC)(l),c=(0,i.IO)(l),f=(0,o.lE)(l,({one:e})=>({children:e(l,{fields:[l.parentId],references:[l.id]})})),p=(0,s.Px)("products",{id:(0,n._L)("id").primaryKey({autoIncrement:!0}),sku:(0,a.fL)("sku").notNull().unique(),title:(0,a.fL)("title").notNull(),description:(0,a.fL)("description"),price:(0,n._L)("price").notNull().default(0),discount:(0,n._L)("discount").default(0),stock:(0,n._L)("stock").notNull().default(0),previewImage:(0,a.fL)("previewImage"),images:(0,a.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,n._L)("category_id").references(()=>l.id,{onDelete:"set null"}),keywordsSearch:(0,a.fL)("keywordsSearch"),isFeatured:(0,n._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,n._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,a.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,a.fL)("updatedAt").default(new Date().toISOString()).notNull()}),m=(0,i.fC)(p),h=(0,i.IO)(p),b=(0,o.lE)(p,({one:e})=>({category:e(l,{fields:[p.categoryId],references:[l.id]})}))}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[492,146,394,595,755,149,711,741,340,730,550],()=>r(5197));module.exports=o})();
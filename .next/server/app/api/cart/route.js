(()=>{var e={};e.id=20,e.ids=[20],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>m,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{POST:()=>l});var i=r(42706),a=r(28203),o=r(45994),s=r(29047),u=r(48590),c=r(47579),d=r(39187);async function l(e){let t=await e.json(),r=Object.keys(t).map(e=>Number(e)),n=await s.A.query.$Products.findMany({where:(0,c.RV)(u.$Products.id,r)}),i=0,a={products:n.map(e=>(i+=(e.price-(e.discount||0))*t[e.id].quantity,{id:e.id,quantity:t[e.id].quantity,previewImage:e.previewImage,title:e.title,price:e.price,priceTotal:(e.price-(e.discount||0))*t[e.id].quantity,stock:e.stock,discount:e.discount})),total:i};return d.NextResponse.json(a)}let p=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:"app/api/cart/route"},resolvedPagePath:"/Users/jojo/Documents/Projects/money-tree-next/src/app/api/cart/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:f,workUnitAsyncStorage:y,serverHooks:m}=p;function g(){return(0,o.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{},24982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{describeHasCheckingStringProperty:function(){return s},describeStringPropertyAccess:function(){return o},isRequestAPICallableInsideAfter:function(){return d},throwWithStaticGenerationBailoutError:function(){return u},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return c},wellKnownProperties:function(){return l}});let n=r(82312),i=r(3295),a=/^[A-Za-z_$][A-Za-z0-9_$]*$/;function o(e,t){return a.test(t)?`\`${e}.${t}\``:`\`${e}[${JSON.stringify(t)}]\``}function s(e,t){let r=JSON.stringify(t);return`\`Reflect.has(${e}, ${r})\`, \`${r} in ${e}\`, or similar`}function u(e,t){throw new n.StaticGenBailoutError(`Route ${e} couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}function c(e,t){throw new n.StaticGenBailoutError(`Route ${e} with \`dynamic = "error"\` couldn't be rendered statically because it used ${t}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`)}function d(){let e=i.afterTaskAsyncStorage.getStore();return(null==e?void 0:e.rootTaskSpawnPhase)==="action"}let l=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","then","catch","finally","status","displayName","toJSON","$$typeof","__esModule"])},42706:(e,t,r)=>{"use strict";e.exports=r(44870)},20614:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(86084),i=r(87550),a=r.n(i),o=r(48590);let s=new(a())(process.env.DB_FILE_NAME),u=(0,n.f)({client:s,schema:o})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>c,$Products:()=>f,$Users:()=>u,CategoryRelations:()=>p,ProductRelations:()=>g,insertCategorySchema:()=>d,insertProductSchema:()=>y,selectCategorySchema:()=>l,selectProductSchema:()=>m});var n=r(23555),i=r(21300),a=r(47095),o=r(49190),s=r(78625);let u=(0,i.D)("users",{id:(0,a.Wh)().primaryKey({autoIncrement:!0}),email:(0,o.Qq)().notNull().unique(),password_hash:(0,o.Qq)().notNull(),salt:(0,o.Qq)().notNull()}),c=(0,i.D)("categories",{id:(0,a.Wh)().primaryKey({autoIncrement:!0}),name:(0,o.Qq)("name").notNull(),content:(0,o.Qq)("content"),parentId:(0,a.nd)("parent_id").references(()=>c.id,{onDelete:"cascade"})}),d=(0,s.r)(c),l=(0,s.aJ)(c),p=(0,n.K1)(c,({one:e})=>({children:e(c,{fields:[c.parentId],references:[c.id]})})),f=(0,i.D)("products",{id:(0,a.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,o.Qq)("sku").notNull().unique(),title:(0,o.Qq)("title").notNull(),description:(0,o.Qq)("description"),price:(0,a.nd)("price").notNull().default(0),discount:(0,a.nd)("discount").default(0),stock:(0,a.nd)("stock").notNull().default(0),previewImage:(0,o.Qq)("previewImage"),images:(0,o.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,a.nd)("category_id").references(()=>c.id,{onDelete:"set null"}),keywordsSearch:(0,o.Qq)("keywordsSearch"),isFeatured:(0,a.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,a.nd)("isActive",{mode:"boolean"}).default(!0),deliveryInfo:(0,o.Qq)("deliveryInfo").default(""),createdAt:(0,o.Qq)("createdAt").$defaultFn(()=>new Date().toISOString()).notNull(),updatedAt:(0,o.Qq)("updatedAt").$defaultFn(()=>new Date().toISOString()).notNull()}),y=(0,s.r)(f),m=(0,s.aJ)(f),g=(0,n.K1)(f,({one:e})=>({category:e(c,{fields:[f.categoryId],references:[c.id]})}))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[994,595,187],()=>r(72449));module.exports=n})();
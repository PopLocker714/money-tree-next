(()=>{var e={};e.id=20,e.ids=[20],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},26442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>q,routeModule:()=>p,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>y});var s={};r.r(s),r.d(s,{POST:()=>l});var a=r(42706),i=r(28203),n=r(45994),o=r(29047),u=r(48590),d=r(47579),c=r(39187);async function l(e){let t=await e.json(),r=Object.keys(t).map(e=>Number(e)),s=await o.A.query.$Products.findMany({where:(0,d.RV)(u.$Products.id,r)}),a=0,i={products:s.map(e=>(a+=(e.price-(e.discount||0))*t[e.id].quantity,{id:e.id,quantity:t[e.id].quantity,previewImage:e.previewImage,title:e.title,price:e.price,priceTotal:(e.price-(e.discount||0))*t[e.id].quantity,stock:e.stock,discount:e.discount})),total:a};return c.NextResponse.json(i)}let p=new a.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:"app/api/cart/route"},resolvedPagePath:"/home/jojo/Documents/money-tree-next/src/app/api/cart/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:y,serverHooks:g}=p;function q(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{},42706:(e,t,r)=>{"use strict";e.exports=r(44870)},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var s=r(86084),a=r(87550),i=r.n(a),n=r(48590);let o=new(i())(process.env.DB_FILE_NAME),u=(0,s.f)({client:o,schema:n})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>d,$Products:()=>m,$Users:()=>u,CategoryRelations:()=>p,ProductRelations:()=>q,insertCategorySchema:()=>c,insertProductSchema:()=>y,selectCategorySchema:()=>l,selectProductSchema:()=>g});var s=r(23555),a=r(21300),i=r(47095),n=r(49190),o=r(78625);let u=(0,a.D)("users",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),email:(0,n.Qq)().notNull().unique(),password_hash:(0,n.Qq)().notNull(),salt:(0,n.Qq)().notNull()}),d=(0,a.D)("categories",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),name:(0,n.Qq)("name").notNull(),parentId:(0,i.nd)("parent_id").references(()=>d.id,{onDelete:"cascade"})}),c=(0,o.r)(d),l=(0,o.aJ)(d),p=(0,s.K1)(d,({one:e})=>({children:e(d,{fields:[d.parentId],references:[d.id]})})),m=(0,a.D)("products",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,n.Qq)("sku").notNull().unique(),title:(0,n.Qq)("title").notNull(),description:(0,n.Qq)("description"),price:(0,i.nd)("price").notNull().default(0),discount:(0,i.nd)("discount").default(0),stock:(0,i.nd)("stock").notNull().default(0),previewImage:(0,n.Qq)("previewImage"),images:(0,n.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,i.nd)("category_id").references(()=>d.id,{onDelete:"set null"}),keywordsSearch:(0,n.Qq)("keywordsSearch"),isFeatured:(0,i.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,i.nd)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.Qq)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.Qq)("updatedAt").default(new Date().toISOString()).notNull()}),y=(0,o.r)(m),g=(0,o.aJ)(m),q=(0,s.K1)(m,({one:e})=>({category:e(d,{fields:[m.categoryId],references:[d.id]})}))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,595,187],()=>r(26442));module.exports=s})();
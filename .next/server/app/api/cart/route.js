(()=>{var e={};e.id=453,e.ids=[453],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},95145:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>y,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(88797),a=r(10042),n=r(58492),u=r(93726),o=r(84160),c=r(99069),d=r(59540);async function l(e){let t=await e.json(),r=Object.keys(t).map(e=>Number(e)),s=await u.Z.query.$Products.findMany({where:(0,c.d3)(o.$Products.id,r)}),i=0,a={products:s.map(e=>(i+=(e.price-(e.discount||0))*t[e.id].quantity,{id:e.id,quantity:t[e.id].quantity,previewImage:e.previewImage,title:e.title,price:e.price,priceTotal:(e.price-(e.discount||0))*t[e.id].quantity,stock:e.stock,discount:e.discount})),total:i};return d.NextResponse.json(a)}let p=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:"app/api/cart/route"},resolvedPagePath:"/Users/jojo/Documents/Projects/money-tree-next/src/app/api/cart/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:m,serverHooks:y}=p;function g(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:m})}},78031:()=>{},35303:()=>{},88797:(e,t,r)=>{"use strict";e.exports=r(30517)},74437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(54797),i=r(85890),a=r.n(i),n=r(84160);let u=new(a())(process.env.DB_FILE_NAME),o=(0,s.t)({client:u,schema:n})},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>o,$Products:()=>l,$Users:()=>u,insertCategorySchema:()=>c,insertProductSchema:()=>p,selectCategorySchema:()=>d,selectProductSchema:()=>f});var s=r(89155),i=r(76718),a=r(20971),n=r(40745);let u=(0,s.Px)("users",{id:(0,i.e$)().primaryKey({autoIncrement:!0}),email:(0,a.fL)().notNull().unique(),password_hash:(0,a.fL)().notNull(),salt:(0,a.fL)().notNull()}),o=(0,s.Px)("categories",{id:(0,i.e$)().primaryKey({autoIncrement:!0}),name:(0,a.fL)("name").notNull(),parentId:(0,i._L)("parent_id").references(()=>o.id,{onDelete:"cascade"})}),c=(0,n.fC)(o),d=(0,n.IO)(o),l=(0,s.Px)("products",{id:(0,i._L)("id").primaryKey({autoIncrement:!0}),sku:(0,a.fL)("sku").notNull().unique(),title:(0,a.fL)("title").notNull(),description:(0,a.fL)("description"),price:(0,i._L)("price").notNull().default(0),discount:(0,i._L)("discount").default(0),stock:(0,i._L)("stock").notNull().default(0),previewImage:(0,a.fL)("previewImage"),images:(0,a.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,i._L)("category_id").references(()=>o.id,{onDelete:"set null"}),keywordsSearch:(0,a.fL)("keywordsSearch"),isFeatured:(0,i._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,i._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,a.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,a.fL)("updatedAt").default(new Date().toISOString()).notNull()}),p=(0,n.fC)(l),f=(0,n.IO)(l)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,805,540],()=>r(95145));module.exports=s})();
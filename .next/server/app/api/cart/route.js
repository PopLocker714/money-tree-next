(()=>{var e={};e.id=453,e.ids=[453],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},95145:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>y,workAsyncStorage:()=>f,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{POST:()=>l});var i=r(88797),a=r(10042),n=r(58492),o=r(93726),u=r(84160),c=r(99069),d=r(59540);async function l(e){let t=await e.json(),r=Object.keys(t).map(e=>Number(e)),s=await o.Z.query.$Products.findMany({where:(0,c.d3)(u.$Products.id,r)}),i=0,a={products:s.map(e=>(i+=(e.price-(e.discount||0))*t[e.id].quantity,{id:e.id,quantity:t[e.id].quantity,previewImage:e.previewImage,title:e.title,price:e.price,priceTotal:(e.price-(e.discount||0))*t[e.id].quantity,stock:e.stock,discount:e.discount})),total:i};return d.NextResponse.json(a)}let p=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:"app/api/cart/route"},resolvedPagePath:"/Users/jojo/Documents/Projects/money-tree-next/src/app/api/cart/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:f,workUnitAsyncStorage:m,serverHooks:y}=p;function g(){return(0,n.patchFetch)({workAsyncStorage:f,workUnitAsyncStorage:m})}},78031:()=>{},35303:()=>{},88797:(e,t,r)=>{"use strict";e.exports=r(30517)},74437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ReflectAdapter",{enumerable:!0,get:function(){return r}});class r{static get(e,t,r){let s=Reflect.get(e,t,r);return"function"==typeof s?s.bind(e):s}static set(e,t,r,s){return Reflect.set(e,t,r,s)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(33333),i=r(85890),a=r.n(i),n=r(84160);let o=new(a())(process.env.DB_FILE_NAME),u=(0,s.t)({client:o,schema:n})},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>c,$Products:()=>f,$Users:()=>u,CategoryRelations:()=>p,ProductRelations:()=>g,insertCategorySchema:()=>d,insertProductSchema:()=>m,selectCategorySchema:()=>l,selectProductSchema:()=>y});var s=r(5357),i=r(89155),a=r(76718),n=r(20971),o=r(40745);let u=(0,i.Px)("users",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),email:(0,n.fL)().notNull().unique(),password_hash:(0,n.fL)().notNull(),salt:(0,n.fL)().notNull()}),c=(0,i.Px)("categories",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),name:(0,n.fL)("name").notNull(),parentId:(0,a._L)("parent_id").references(()=>c.id,{onDelete:"cascade"})}),d=(0,o.fC)(c),l=(0,o.IO)(c),p=(0,s.lE)(c,({one:e})=>({children:e(c,{fields:[c.parentId],references:[c.id]})})),f=(0,i.Px)("products",{id:(0,a._L)("id").primaryKey({autoIncrement:!0}),sku:(0,n.fL)("sku").notNull().unique(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description"),price:(0,a._L)("price").notNull().default(0),discount:(0,a._L)("discount").default(0),stock:(0,a._L)("stock").notNull().default(0),previewImage:(0,n.fL)("previewImage"),images:(0,n.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,a._L)("category_id").references(()=>c.id,{onDelete:"set null"}),keywordsSearch:(0,n.fL)("keywordsSearch"),isFeatured:(0,a._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,a._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.fL)("updatedAt").default(new Date().toISOString()).notNull()}),m=(0,o.fC)(f),y=(0,o.IO)(f),g=(0,s.lE)(f,({one:e})=>({category:e(c,{fields:[f.categoryId],references:[c.id]})}))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,711,540],()=>r(95145));module.exports=s})();
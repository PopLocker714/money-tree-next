(()=>{var e={};e.id=20,e.ids=[20],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72449:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>p,serverHooks:()=>q,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>y});var n={};r.r(n),r.d(n,{POST:()=>l});var s=r(42706),i=r(28203),a=r(45994),o=r(29047),u=r(48590),d=r(47579),c=r(39187);async function l(e){let t=await e.json(),r=Object.keys(t).map(e=>Number(e)),n=await o.A.query.$Products.findMany({where:(0,d.RV)(u.$Products.id,r)}),s=0,i={products:n.map(e=>(s+=(e.price-(e.discount||0))*t[e.id].quantity,{id:e.id,quantity:t[e.id].quantity,previewImage:e.previewImage,title:e.title,price:e.price,priceTotal:(e.price-(e.discount||0))*t[e.id].quantity,stock:e.stock,discount:e.discount})),total:s};return c.NextResponse.json(i)}let p=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/cart/route",pathname:"/api/cart",filename:"route",bundlePath:"app/api/cart/route"},resolvedPagePath:"/Users/jojo/Documents/Projects/money-tree-next/src/app/api/cart/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:m,workUnitAsyncStorage:y,serverHooks:q}=p;function g(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:y})}},96487:()=>{},78335:()=>{},42706:(e,t,r)=>{"use strict";e.exports=r(44870)},29047:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(86084),s=r(87550),i=r.n(s),a=r(48590);let o=new(i())(process.env.DB_FILE_NAME),u=(0,n.f)({client:o,schema:a})},48590:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>d,$Products:()=>m,$Users:()=>u,CategoryRelations:()=>p,ProductRelations:()=>g,insertCategorySchema:()=>c,insertProductSchema:()=>y,selectCategorySchema:()=>l,selectProductSchema:()=>q});var n=r(23555),s=r(21300),i=r(47095),a=r(49190),o=r(78625);let u=(0,s.D)("users",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),email:(0,a.Qq)().notNull().unique(),password_hash:(0,a.Qq)().notNull(),salt:(0,a.Qq)().notNull()}),d=(0,s.D)("categories",{id:(0,i.Wh)().primaryKey({autoIncrement:!0}),name:(0,a.Qq)("name").notNull(),content:(0,a.Qq)("content"),parentId:(0,i.nd)("parent_id").references(()=>d.id,{onDelete:"cascade"})}),c=(0,o.r)(d),l=(0,o.aJ)(d),p=(0,n.K1)(d,({one:e})=>({children:e(d,{fields:[d.parentId],references:[d.id]})})),m=(0,s.D)("products",{id:(0,i.nd)("id").primaryKey({autoIncrement:!0}),sku:(0,a.Qq)("sku").notNull().unique(),title:(0,a.Qq)("title").notNull(),description:(0,a.Qq)("description"),price:(0,i.nd)("price").notNull().default(0),discount:(0,i.nd)("discount").default(0),stock:(0,i.nd)("stock").notNull().default(0),previewImage:(0,a.Qq)("previewImage"),images:(0,a.Qq)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,i.nd)("category_id").references(()=>d.id,{onDelete:"set null"}),keywordsSearch:(0,a.Qq)("keywordsSearch"),isFeatured:(0,i.nd)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,i.nd)("isActive",{mode:"boolean"}).default(!0),deliveryInfo:(0,a.Qq)("deliveryInfo").default(""),createdAt:(0,a.Qq)("createdAt").$defaultFn(()=>new Date().toISOString()).notNull(),updatedAt:(0,a.Qq)("updatedAt").$defaultFn(()=>new Date().toISOString()).notNull()}),y=(0,o.r)(m),q=(0,o.aJ)(m),g=(0,n.K1)(m,({one:e})=>({category:e(d,{fields:[m.categoryId],references:[d.id]})}))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,595,187],()=>r(72449));module.exports=n})();
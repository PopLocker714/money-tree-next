(()=>{var e={};e.id=980,e.ids=[980],e.modules={87550:e=>{"use strict";e.exports=require("better-sqlite3")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},29021:e=>{"use strict";e.exports=require("fs")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},47615:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(70260),o=r(28203),n=r(25155),a=r.n(n),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["(shop)",{children:["catalog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,80010)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/catalog/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,49890)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/catalog/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/(shop)/catalog/page",pathname:"/catalog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},220:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,59607,23)),Promise.resolve().then(r.t.bind(r,71066,23)),Promise.resolve().then(r.bind(r,97128))},86652:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,28531,23)),Promise.resolve().then(r.t.bind(r,41902,23)),Promise.resolve().then(r.bind(r,73052))},79334:(e,t,r)=>{"use strict";var s=r(58686);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},73052:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(45512),o=r(82281),n=r(28531),a=r.n(n),i=r(79334);r(58009);var l=r(73454);function d({category:e,isRoot:t}){let r=(0,i.useSearchParams)().get("category"),n=(r?JSON.parse(r):[]).includes(e.id);return(0,s.jsxs)("li",{className:(0,o.A)([t?"ml-2":"pl-4 border-l border-gray-300","border rounded-xl transition-colors",n&&"bg-gray-100 font-medium"]),children:[(0,s.jsx)(a(),{href:`/catalog?${new URLSearchParams({category:JSON.stringify((0,l.O)(e))})}`,className:"py-2 px-3",children:e.name}),e.children&&e.children.length>0&&(0,s.jsx)("ul",{className:"ml-4",children:e.children.map(e=>(0,s.jsx)(d,{category:e,isRoot:!1},e.id))})]})}},80010:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x,metadata:()=>p});var s=r(62740),o=r(29047),n=r(12562),a=r(48590),i=r(47579);r(76301);var l=r(97128);function d({items:e}){return(0,s.jsx)("ul",{className:"flex flex-wrap",children:e.map(e=>(0,s.jsx)(l.default,{category:e,isRoot:!0},e.id))})}var c=r(67084);async function u(){let e=await (0,c.b)();return(0,s.jsx)("aside",{className:"py-4",children:(0,s.jsx)(d,{items:e})})}let p={title:"Каталог",description:""};async function x({searchParams:e}){let t=(await e).category||"[]";Array.isArray(t)&&(t="[]");let r=JSON.parse(t),l=(r.length>0?await o.A.query.$Products.findMany({where:(0,i.Uo)((0,i.RV)(a.$Products.categoryId,r.map(e=>Number(e))),(0,i.eq)(a.$Products.isActive,!0))}):await o.A.query.$Products.findMany({where:(0,i.eq)(a.$Products.isActive,!0)})).map(e=>({cost:e.price||0,discount:e.discount||0,title:e.title,image:e.previewImage,id:e.id?.toString()||""}));return(0,s.jsx)("section",{className:"container",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(u,{}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("div",{className:"grid grid-cols-4 gap-4 ",children:l.map(e=>(0,s.jsx)(n.A,{...e},e.id))})})]})})}},97128:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/main/Catalog/AsideCategoryItem.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jojo/Documents/Projects/money-tree-next/src/components/app/ui/layout/main/Catalog/AsideCategoryItem.tsx","default")},12562:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(62740),o=r(13673),n=r(35635),a=r(59607),i=r.n(a);r(76301);let l=function({cost:e=0,discount:t,id:r,image:a,title:l,className:d}){return(0,s.jsxs)(i(),{className:(0,o.A)("relative flex flex-col overflow-hidden max-w-[266px] rounded-3xl shadow-[0px_0px_16px_0_rgba(51,37,87,0.15)] transition-shadow hover:shadow-[0px_0px_16px_0_rgba(51,37,87,0.3)]",d),href:`/product/${r}`,children:[t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"absolute top-4 right-4 bg-red-500 text-white-100  text-sm font-medium p-[6px] rounded-full",children:"Распродажа"}),(0,s.jsxs)("span",{className:"absolute top-4 left-4  bg-red-500 text-white-100 text-sm font-medium p-[6px] rounded-full",children:[Math.floor(100-(e-t)/e*100),"%"]})]}):null,(0,s.jsx)(n.default,{className:"max-w-[266px] max-h-[235px] object-cover",alt:l,width:266,height:235,src:a||"https://placehold.co/266x235/000000/FFFFFF/png"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-base text-foreground mb-4",children:l}),t?(0,s.jsxs)("p",{className:"text-green-400 flex items-center text-xl w-fit rounded-xl py-3 px-6 bg-gray-100 ",children:[e-t,"₽ ",(0,s.jsxs)("span",{className:"line-through ml-1 text-gray-400 text-xs",children:[e,"₽"]})]}):(0,s.jsxs)("p",{className:"text-foreground flex text-xl w-fit rounded-xl py-3 px-6 bg-gray-100",children:[e,"₽"]})]})]},r)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,641,77,715,595,621,837,791,759],()=>r(47615));module.exports=s})();
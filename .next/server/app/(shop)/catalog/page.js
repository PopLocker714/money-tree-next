(()=>{var e={};e.id=922,e.ids=[922],e.modules={85890:e=>{"use strict";e.exports=require("better-sqlite3")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},17360:e=>{"use strict";e.exports=require("url")},11001:e=>{e.exports={style:{fontFamily:"'Montserrat', 'Montserrat Fallback'",fontStyle:"normal"},className:"__className_0385ae"}},21660:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(49442),a=r(10042),n=r(48190),i=r.n(n),o=r(63289),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["(shop)",{children:["catalog",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,41294)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/catalog/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,63013)),"/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/jojo/Documents/Projects/money-tree-next/src/app/(shop)/catalog/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(shop)/catalog/page",pathname:"/catalog",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},62927:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,60903,23)),Promise.resolve().then(r.t.bind(r,90821,23))},48628:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,62704,23)),Promise.resolve().then(r.t.bind(r,73510,23))},12154:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});var s=r(93726);let a=async()=>(function(e){let t={};e.forEach(e=>{t[e.id]={...e,children:[]}});let r=[];return e.forEach(e=>{null===e.parentId?r.push(t[e.id]):t[e.parentId].children.push(t[e.id])}),r})(await s.Z.query.$Categories.findMany())},41294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>p});var s=r(47705),a=r(59540),n=r(93726),i=r(38176);r(66833);var o=r(23496);function l({category:e,isRoot:t}){return(0,s.jsxs)("li",{className:t?"pb-1":"pl-4 border-l border-gray-300",children:[(0,s.jsx)(o.default,{href:`/catalog?category=${e.name}`,className:"link",children:e.name}),e.children&&e.children.length>0&&(0,s.jsx)("ul",{className:"ml-4",children:e.children.map(e=>(0,s.jsx)(l,{category:e,isRoot:!1},e.id))})]})}function d({items:e}){return(0,s.jsx)("ul",{className:"pr-4",children:e.map(e=>(0,s.jsx)(l,{category:e,isRoot:!0},e.id))})}var c=r(12154);async function u(){let e=await (0,c.n)();return(0,s.jsx)("aside",{className:"py-4",children:(0,s.jsx)(d,{items:e})})}let p={title:"Каталог",description:""};async function m(){await (0,a.connection)();let e=(await n.Z.query.$Products.findMany()).map(e=>({cost:e.price||0,discount:e.discount||0,title:e.title,image:e.previewImage,id:e.id?.toString()||""}));return(0,s.jsx)("section",{className:"container",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(u,{}),(0,s.jsx)("div",{className:"flex-1 py-6 pl-4",children:(0,s.jsx)("div",{className:"grid grid-cols-3 gap-4",children:e.map(e=>(0,s.jsx)(i.Z,{...e},e.id))})})]})})}},38176:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(47705);let a=function(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(a&&(a+=" "),a+=s)}else for(s in t)t[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=t);return s};var n=r(76217),i=r(23496);r(66833);let o=function({cost:e=0,discount:t,id:r,image:o,title:l,className:d}){return(0,s.jsxs)(i.default,{className:a("relative flex flex-col overflow-hidden max-w-[266px] rounded-3xl shadow-[0px_0px_16px_0_rgba(51,37,87,0.15)]",d),href:`/product/${r}`,children:[t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"absolute top-4 right-4 bg-red-500 text-white-100  text-sm font-medium p-[6px] rounded-full",children:"Распродажа"}),(0,s.jsxs)("span",{className:"absolute top-4 left-4  bg-red-500 text-white-100 text-sm font-medium p-[6px] rounded-full",children:[Math.floor(100-(e-t)/e*100),"%"]})]}):null,(0,s.jsx)(n.default,{className:"min-w-[266px] min-h-[235px]",alt:l,width:266,height:235,src:o||"https://placehold.co/266x235/000000/FFFFFF/png"}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"text-base text-foreground mb-4",children:l}),t?(0,s.jsxs)("p",{className:"text-green-400 flex items-center text-xl w-fit rounded-xl py-3 px-6 bg-gray-100 ",children:[e-t,"₽ ",(0,s.jsxs)("span",{className:"line-through ml-1 text-gray-400 text-xs",children:[e,"₽"]})]}):(0,s.jsxs)("p",{className:"text-foreground flex text-xl w-fit rounded-xl py-3 px-6 bg-gray-100",children:[e,"₽"]})]})]},r)}},93726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var s=r(54797),a=r(85890),n=r.n(a),i=r(84160);let o=new(n())(process.env.DB_FILE_NAME),l=(0,s.t)({client:o,schema:i})},84160:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$Categories:()=>l,$Products:()=>u,$Users:()=>o,insertCategorySchema:()=>d,insertProductSchema:()=>p,selectCategorySchema:()=>c,selectProductSchema:()=>m});var s=r(89155),a=r(76718),n=r(20971),i=r(40745);let o=(0,s.Px)("users",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),email:(0,n.fL)().notNull().unique(),password_hash:(0,n.fL)().notNull(),salt:(0,n.fL)().notNull()}),l=(0,s.Px)("categories",{id:(0,a.e$)().primaryKey({autoIncrement:!0}),name:(0,n.fL)("name").notNull(),parentId:(0,a._L)("parent_id").references(()=>l.id,{onDelete:"cascade"})}),d=(0,i.fC)(l),c=(0,i.IO)(l),u=(0,s.Px)("products",{id:(0,a._L)("id").primaryKey({autoIncrement:!0}),sku:(0,n.fL)("sku").notNull().unique(),title:(0,n.fL)("title").notNull(),description:(0,n.fL)("description"),price:(0,a._L)("price").notNull().default(0),discount:(0,a._L)("discount").default(0),stock:(0,a._L)("stock").notNull().default(0),previewImage:(0,n.fL)("previewImage"),images:(0,n.fL)("images").notNull().$default(()=>JSON.stringify([null,null,null,null,null])),categoryId:(0,a._L)("category_id").references(()=>l.id,{onDelete:"set null"}),keywordsSearch:(0,n.fL)("keywordsSearch"),isFeatured:(0,a._L)("isFeatured",{mode:"boolean"}).default(!1),isActive:(0,a._L)("isActive",{mode:"boolean"}).default(!0),createdAt:(0,n.fL)("createdAt").default(new Date().toISOString()).notNull(),updatedAt:(0,n.fL)("updatedAt").default(new Date().toISOString()).notNull()}),p=(0,i.fC)(u),m=(0,i.IO)(u)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,146,394,704,710,805,540,750],()=>r(21660));module.exports=s})();
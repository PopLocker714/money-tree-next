"use strict";exports.id=152,exports.ids=[152],exports.modules={78051:(e,t,r)=>{r.d(t,{Qk:()=>o.Q});var o=r(12482);r(61770),r(27873)},71623:(e,t,r)=>{var o=r(85941);r.o(o,"redirect")&&r.d(t,{redirect:function(){return o.redirect}})},46898:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return s}});let o=r(77361),n=r(14722);function s(e){return(0,n.isRedirectError)(e)||(0,o.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85941:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return i},RedirectType:function(){return o.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return o.permanentRedirect},redirect:function(){return o.redirect},unstable_rethrow:function(){return s.unstable_rethrow}});let o=r(14722),n=r(77361),s=r(29097);class a extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class i extends URLSearchParams{append(){throw new a}delete(){throw new a}set(){throw new a}sort(){throw new a}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14852:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14722:(e,t,r)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return o},getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return f},getURLFromRedirectError:function(){return l},isRedirectError:function(){return d},permanentRedirect:function(){return u},redirect:function(){return c}});let n=r(209),s=r(14852),a="NEXT_REDIRECT";function i(e,t,r){void 0===r&&(r=s.RedirectStatusCode.TemporaryRedirect);let o=Error(a);return o.digest=a+";"+t+";"+e+";"+r+";",o}function c(e,t){let r=n.actionAsyncStorage.getStore();throw i(e,t||((null==r?void 0:r.isAction)?"push":"replace"),s.RedirectStatusCode.TemporaryRedirect)}function u(e,t){throw void 0===t&&(t="replace"),i(e,t,s.RedirectStatusCode.PermanentRedirect)}function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,o]=t,n=t.slice(2,-2).join(";"),i=Number(t.at(-2));return r===a&&("replace"===o||"push"===o)&&"string"==typeof n&&!isNaN(i)&&i in s.RedirectStatusCode}function l(e){return d(e)?e.digest.split(";").slice(2,-2).join(";"):null}function f(e){if(!d(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!d(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}(function(e){e.push="push",e.replace="replace"})(o||(o={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},29097:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,s.isBailoutToCSRError)(t)||(0,o.isDynamicUsageError)(t)||(0,n.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let o=r(66714),n=r(15730),s=r(38465),a=r(46898);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},66714:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return i}});let o=r(3105),n=r(38465),s=r(46898),a=r(94375),i=e=>(0,o.isDynamicServerError)(e)||(0,n.isBailoutToCSRError)(e)||(0,s.isNextRouterError)(e)||(0,a.isDynamicPostpone)(e)},15730:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return o}});let r=Symbol.for("react.postpone");function o(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},12482:(e,t,r)=>{Object.defineProperty(t,"Q",{enumerable:!0,get:function(){return l}});let o=r(38438),n=r(13830),s=r(79348),a=r(30412),i=r(94375),c=r(93122),u=r(62010),d=r(49625);function l(){let e="cookies",t=s.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(t.forceStatic)return p(o.RequestCookiesAdapter.seal(new n.RequestCookies(new Headers({}))));if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`);if("after"===r.phase)throw Error(`Route ${t.route} used "cookies" inside "unstable_after(...)". This is not supported. If you need this data inside an "unstable_after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/unstable_after`)}if(t.dynamicShouldError)throw new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type)return function(e,t){let r=f.get(t);if(r)return r;let o=(0,u.makeHangingPromise)(t.renderSignal,"`cookies()`");return f.set(t,o),Object.defineProperties(o,{[Symbol.iterator]:{value:function(){let r="`cookies()[Symbol.iterator]()`",o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},size:{get(){let r="`cookies().size`",o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},get:{value:function(){let r;r=0==arguments.length?"`cookies().get()`":`\`cookies().get(${h(arguments[0])})\``;let o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},getAll:{value:function(){let r;r=0==arguments.length?"`cookies().getAll()`":`\`cookies().getAll(${h(arguments[0])})\``;let o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},has:{value:function(){let r;r=0==arguments.length?"`cookies().has()`":`\`cookies().has(${h(arguments[0])})\``;let o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},set:{value:function(){let r;if(0==arguments.length)r="`cookies().set()`";else{let e=arguments[0];r=e?`\`cookies().set(${h(e)}, ...)\``:"`cookies().set(...)`"}let o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},delete:{value:function(){let r;r=0==arguments.length?"`cookies().delete()`":1==arguments.length?`\`cookies().delete(${h(arguments[0])})\``:`\`cookies().delete(${h(arguments[0])}, ...)\``;let o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},clear:{value:function(){let r="`cookies().clear()`",o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}},toString:{value:function(){let r="`cookies().toString()`",o=y(e,r);(0,i.abortAndThrowOnSynchronousRequestDataAccess)(e,r,o,t)}}}),o}(t.route,r);"prerender-ppr"===r.type?(0,i.postponeWithTracking)(t.route,e,r.dynamicTracking):"prerender-legacy"===r.type&&(0,i.throwToInterruptStaticGeneration)(e,t,r)}(0,i.trackDynamicDataInDynamicRender)(t,r)}let d=(0,a.getExpectedRequestStore)(e);return p((0,o.areCookiesMutableInCurrentPhase)(d)?d.userspaceMutableCookies:d.cookies)}r(22551);let f=new WeakMap;function p(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),Object.defineProperties(r,{[Symbol.iterator]:{value:e[Symbol.iterator]?e[Symbol.iterator].bind(e):m.bind(e)},size:{get:()=>e.size},get:{value:e.get.bind(e)},getAll:{value:e.getAll.bind(e)},has:{value:e.has.bind(e)},set:{value:e.set.bind(e)},delete:{value:e.delete.bind(e)},clear:{value:"function"==typeof e.clear?e.clear.bind(e):b.bind(e,r)},toString:{value:e.toString.bind(e)}}),r}function h(e){return"object"==typeof e&&null!==e&&"string"==typeof e.name?`'${e.name}'`:"string"==typeof e?`'${e}'`:"..."}function y(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)}function m(){return this.getAll().map(e=>[e.name,e]).values()}function b(e){for(let e of this.getAll())this.delete(e.name);return e}(0,d.createDedupedByCallsiteServerErrorLoggerDev)(y)},27873:(e,t,r)=>{let o=r(30412),n=r(79348),s=r(94375),a=r(49625),i=r(93122),c=r(3105);new WeakMap;class u{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){d("draftMode().enable()"),null!==this._provider&&this._provider.enable()}disable(){d("draftMode().disable()"),null!==this._provider&&this._provider.disable()}}function d(e){let t=n.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r){if("cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`);if("unstable-cache"===r.type)throw Error(`Route ${t.route} used "${e}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`)}if(t.dynamicShouldError)throw new i.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`);if(r){if("prerender"===r.type){let o=Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`);(0,s.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,o,r)}else if("prerender-ppr"===r.type)(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);else if("prerender-legacy"===r.type){r.revalidate=0;let o=new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`);throw t.dynamicUsageDescription=e,t.dynamicUsageStack=o.stack,o}}}}(0,a.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)})},61770:(e,t,r)=>{r(76558),r(79348),r(30412),r(94375),r(93122),r(62010);let o=r(49625);r(22551);let n=new WeakMap;(0,o.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Error(`${r}used ${t}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`)})},76558:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return n}});let o=r(74437);class n extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new n}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,n){if("symbol"==typeof r)return o.ReflectAdapter.get(t,r,n);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);if(void 0!==a)return o.ReflectAdapter.get(t,a,n)},set(t,r,n,s){if("symbol"==typeof r)return o.ReflectAdapter.set(t,r,n,s);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);return o.ReflectAdapter.set(t,i??r,n,s)},has(t,r){if("symbol"==typeof r)return o.ReflectAdapter.has(t,r);let n=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==s&&o.ReflectAdapter.has(t,s)},deleteProperty(t,r){if("symbol"==typeof r)return o.ReflectAdapter.deleteProperty(t,r);let n=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===s||o.ReflectAdapter.deleteProperty(t,s)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return n.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,o]of this.entries())e.call(t,o,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},38438:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{MutableRequestCookiesAdapter:function(){return f},ReadonlyRequestCookiesError:function(){return i},RequestCookiesAdapter:function(){return c},appendMutableCookies:function(){return l},areCookiesMutableInCurrentPhase:function(){return h},getModifiedCookieValues:function(){return d},responseCookiesToRequestCookies:function(){return m},wrapWithMutableAccessCheck:function(){return p}});let o=r(13830),n=r(74437),s=r(79348),a=r(30412);class i extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new i}}class c{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return i.callable;default:return n.ReflectAdapter.get(e,t,r)}}})}}let u=Symbol.for("next.mutated.cookies");function d(e){let t=e[u];return t&&Array.isArray(t)&&0!==t.length?t:[]}function l(e,t){let r=d(t);if(0===r.length)return!1;let n=new o.ResponseCookies(e),s=n.getAll();for(let e of r)n.set(e);for(let e of s)n.set(e);return!0}class f{static wrap(e,t){let r=new o.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let a=[],i=new Set,c=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),a=r.getAll().filter(e=>i.has(e.name)),t){let e=[];for(let t of a){let r=new o.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},d=new Proxy(r,{get(e,t,r){switch(t){case u:return a;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),d}finally{c()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),d}finally{c()}};default:return n.ReflectAdapter.get(e,t,r)}}});return d}}function p(e){let t=new Proxy(e,{get(e,r,o){switch(r){case"delete":return function(...r){return y("cookies().delete"),e.delete(...r),t};case"set":return function(...r){return y("cookies().set"),e.set(...r),t};default:return n.ReflectAdapter.get(e,r,o)}}});return t}function h(e){return"action"===e.phase}function y(e){if(!h((0,a.getExpectedRequestStore)(e)))throw new i}function m(e){let t=new o.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},38465:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return o},isBailoutToCSRError:function(){return n}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class o extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},41715:(e,t,r)=>{r.d(t,{N:()=>z});var o=r(72254);let n=e=>o.Buffer.from(e).toString("base64url");var s=r(6005),a=r(47261);class i extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class c extends i{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class u extends i{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class d extends i{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class l extends i{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}let f=s.webcrypto,p=e=>a.types.isCryptoKey(e),h=e=>a.types.isKeyObject(e);function y(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let m=(e,...t)=>y("Key must be ",e,...t);function b(e,t,...r){return y(`Key for the ${e} algorithm must be `,t,...r)}let g=e=>h(e)||p(e),w=["KeyObject"];function S(e){if(!("object"==typeof e&&null!==e)||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function E(e){return S(e)&&"string"==typeof e.kty}(globalThis.CryptoKey||f?.CryptoKey)&&w.push("CryptoKey"),new WeakMap;let _=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new c("Unsupported key curve for this operation")}},v=(e,t)=>{let r;if(p(e))r=s.KeyObject.from(e);else if(h(e))r=e;else if(E(e))return e.crv;else throw TypeError(m(e,...w));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;return _(e)}default:throw TypeError("Invalid asymmetric key type for this operation")}},R=(e,t)=>{let r;try{r=e instanceof s.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},k=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function T(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function A(e,t){return e.name===t}function P(e){return parseInt(e.name.slice(4),10)}let O=(0,a.promisify)(s.sign),j=async(e,t,r)=>{let o=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(m(t,...w));return(0,s.createSecretKey)(t)}if(t instanceof s.KeyObject)return t;if(p(t))return function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!A(e.algorithm,"HMAC"))throw T("HMAC");let r=parseInt(t.slice(2),10);if(P(e.algorithm.hash)!==r)throw T(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!A(e.algorithm,"RSASSA-PKCS1-v1_5"))throw T("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(P(e.algorithm.hash)!==r)throw T(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!A(e.algorithm,"RSA-PSS"))throw T("RSA-PSS");let r=parseInt(t.slice(2),10);if(P(e.algorithm.hash)!==r)throw T(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw T("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!A(e.algorithm,"ECDSA"))throw T("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw T(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}(function(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}})(e,r)}(t,e,r),s.KeyObject.from(t);if(E(t))return e.startsWith("HS")?(0,s.createSecretKey)(Buffer.from(t.k,"base64url")):t;throw TypeError(m(t,...w,"Uint8Array","JSON Web Key"))}(e,t,"sign");if(e.startsWith("HS")){let t=s.createHmac(function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new c(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),o);return t.update(r),t.digest()}return O(function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new c(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),r,function(e,t){let r,o,n,a;if(t instanceof s.KeyObject)r=t.asymmetricKeyType,o=t.asymmetricKeyDetails;else switch(n=!0,t.kty){case"RSA":r="rsa";break;case"EC":r="ec";break;case"OKP":if("Ed25519"===t.crv){r="ed25519";break}if("Ed448"===t.crv){r="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(r))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");R(t,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===r){let{hashAlgorithm:t,mgf1HashAlgorithm:r,saltLength:n}=o,s=parseInt(e.slice(-3),10);if(void 0!==t&&(t!==`sha${s}`||r!==t))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==n&&n>s>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");R(t,e),a={padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==r)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let o=v(t),n=k.get(e);if(o!==n)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${o}`);a={dsaEncoding:"ieee-p1363"};break}default:throw new c(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return n?{format:"jwk",key:t,...a}:a?{...a,key:t}:t}(e,o))},$=(...e)=>{let t;let r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0},C=new TextEncoder,H=new TextDecoder,x=e=>e?.[Symbol.toStringTag],M=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},D=(e,t,r,o)=>{if(!(t instanceof Uint8Array)){if(o&&E(t)){if(function(e){return E(e)&&"oct"===e.kty&&"string"==typeof e.k}(t)&&M(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!g(t))throw TypeError(b(e,t,...w,"Uint8Array",o?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${x(t)} instances for symmetric algorithms must be of type "secret"`)}},K=(e,t,r,o)=>{if(o&&E(t))switch(r){case"sign":if(function(e){return"oct"!==e.kty&&"string"==typeof e.d}(t)&&M(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(function(e){return"oct"!==e.kty&&void 0===e.d}(t)&&M(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!g(t))throw TypeError(b(e,t,...w,o?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${x(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${x(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${x(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${x(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${x(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function I(e,t,r,o){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?D(t,r,o,e):K(t,r,o,e)}I.bind(void 0,!1);let N=I.bind(void 0,!0),L=function(e,t,r,o,n){let s;if(void 0!==n.crit&&o?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||void 0===o.crit)return new Set;if(!Array.isArray(o.crit)||0===o.crit.length||o.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let a of(s=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,o.crit)){if(!s.has(a))throw new c(`Extension Header Parameter "${a}" is not recognized`);if(void 0===n[a])throw new e(`Extension Header Parameter "${a}" is missing`);if(s.get(a)&&void 0===o[a])throw new e(`Extension Header Parameter "${a}" MUST be integrity protected`)}return new Set(o.crit)};class W{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new u("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!$(this._protectedHeader,this._unprotectedHeader))throw new u("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...this._protectedHeader,...this._unprotectedHeader},s=L(u,new Map([["b64",!0]]),t?.crit,this._protectedHeader,o),a=!0;if(s.has("b64")&&"boolean"!=typeof(a=this._protectedHeader.b64))throw new u('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:i}=o;if("string"!=typeof i||!i)throw new u('JWS "alg" (Algorithm) Header Parameter missing or invalid');N(i,e,"sign");let c=this._payload;a&&(c=C.encode(n(c)));let d=function(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let o of e)t.set(o,r),r+=o.length;return t}(r=this._protectedHeader?C.encode(n(JSON.stringify(this._protectedHeader))):C.encode(""),C.encode("."),c),l={signature:n(await j(i,e,d)),payload:""};return a&&(l.payload=H.decode(c)),this._unprotectedHeader&&(l.header=this._unprotectedHeader),this._protectedHeader&&(l.protected=H.decode(r)),l}}class J{_flattened;constructor(e){this._flattened=new W(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}let U=e=>Math.floor(e.getTime()/1e3),q=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,B=e=>{let t;let r=q.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let o=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(o);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*o);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*o);break;case"day":case"days":case"d":t=Math.round(86400*o);break;case"week":case"weeks":case"w":t=Math.round(604800*o);break;default:t=Math.round(0x1e187e0*o)}return"-"===r[1]||"ago"===r[4]?-t:t};function G(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}class F{_payload;constructor(e={}){if(!S(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:G("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:G("setNotBefore",U(e))}:this._payload={...this._payload,nbf:U(new Date)+B(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:G("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:G("setExpirationTime",U(e))}:this._payload={...this._payload,exp:U(new Date)+B(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:U(new Date)}:e instanceof Date?this._payload={...this._payload,iat:G("setIssuedAt",U(e))}:"string"==typeof e?this._payload={...this._payload,iat:G("setIssuedAt",U(new Date)+B(e))}:this._payload={...this._payload,iat:G("setIssuedAt",e)},this}}class z extends F{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new J(C.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new d("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}}};